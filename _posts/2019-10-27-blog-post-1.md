---
title: '爬虫学习笔记'
date: 2019-10-25
permalink: /posts/2019/10/blog-post-9/
tags:
  - urllib
  - beautifulsoup
  - xpath
---

爬虫学习笔记

# Simplest scraping
**We gonna show how to open a very simple [webpage](https://morvanzhou.github.io/static/scraping/basic-structure.html), and read all the content in it.**


```python
from urllib.request import urlopen

# if has Chinese, apply decode()
html = urlopen("https://morvanzhou.github.io/static/scraping/basic-structure.html").read().decode('utf-8')
print(html)

```

    <!DOCTYPE html>
    <html lang="cn">
    <head>
    	<meta charset="UTF-8">
    	<title>Scraping tutorial 1 | 莫烦Python</title>
    	<link rel="icon" href="https://morvanzhou.github.io/static/img/description/tab_icon.png">
    </head>
    <body>
    	<h1>爬虫测试1</h1>
    	<p>
    		这是一个在 <a href="https://morvanzhou.github.io/">莫烦Python</a>
    		<a href="https://morvanzhou.github.io/tutorials/data-manipulation/scraping/">爬虫教程</a> 中的简单测试.
    	</p>
    
    </body>
    </html>


**Then we select some text according to the tag arround text using regular expression**


```python
import re
res = re.findall(r"<title>(.+?)</title>", html)
print("\nPage title is: ", res[0])
```

    
    Page title is:  Scraping tutorial 1 | 莫烦Python


**Another example to select paragraph content out of html.**


```python
res = re.findall(r"<p>(.*?)</p>", html, flags=re.DOTALL)    # re.DOTALL if multi line
print("\nPage paragraph is: ", res[0])
```

    
    Page paragraph is:  
    		这是一个在 <a href="https://morvanzhou.github.io/">莫烦Python</a>
    		<a href="https://morvanzhou.github.io/tutorials/scraping">爬虫教程</a> 中的简单测试.
    	


**And select links using regex**


```python
res = re.findall(r'href="(.*?)"', html)
print("\nAll links: ", res)
```

    
    All links:  ['https://morvanzhou.github.io/static/img/description/tab_icon.png', 'https://morvanzhou.github.io/', 'https://morvanzhou.github.io/tutorials/scraping']


# Basic usage of beautifulsoup
**First we still need to open a [page](https://morvanzhou.github.io/static/scraping/basic-structure.html), then we can apply beautifulsoup on this page's html.**


```python
from bs4 import BeautifulSoup
from urllib.request import urlopen

# if has Chinese, apply decode()
html = urlopen("https://morvanzhou.github.io/static/scraping/basic-structure.html").read().decode('utf-8')
print(html)
```

    <!DOCTYPE html>
    <html lang="cn">
    <head>
    	<meta charset="UTF-8">
    	<title>Scraping tutorial 1 | 莫烦Python</title>
    	<link rel="icon" href="https://morvanzhou.github.io/static/img/description/tab_icon.png">
    </head>
    <body>
    	<h1>爬虫测试1</h1>
    	<p>
    		这是一个在 <a href="https://morvanzhou.github.io/">莫烦Python</a>
    		<a href="https://morvanzhou.github.io/tutorials/scraping">爬虫教程</a> 中的简单测试.
    	</p>
    
    </body>
    </html>


**Parsing this html using a method called lxml, create a soup object. You can simply "h1" or "p" to call the heading 1 and paragraph tag from soup.**


```python
soup = BeautifulSoup(html, features='lxml')
print(soup.h1)
print('\n', soup.p)
```

    <h1>爬虫测试1</h1>
    
     <p>
    		这是一个在 <a href="https://morvanzhou.github.io/">莫烦Python</a>
    <a href="https://morvanzhou.github.io/tutorials/scraping">爬虫教程</a> 中的简单测试.
    	</p>


**Or using some helpful functions to find tags. Access the attribute of found tags using a key just like what you do in a python dictionary.**


```python
all_href = soup.find_all('a')
all_href = [l['href'] for l in all_href]
print('\n', all_href)
```

    
     ['https://morvanzhou.github.io/', 'https://morvanzhou.github.io/tutorials/scraping']


# Beautifulsoup: find by CSS class 
**First we still need to open a [page](https://morvanzhou.github.io/static/scraping/list.html), then we can apply beautifulsoup on this page's html.**


```python
from bs4 import BeautifulSoup
from urllib.request import urlopen

# if has Chinese, apply decode()
html = urlopen("https://morvanzhou.github.io/static/scraping/list.html").read().decode('utf-8')
print(html)
```

    <!DOCTYPE html>
    <html lang="cn">
    <head>
    	<meta charset="UTF-8">
    	<title>爬虫练习 列表 class | 莫烦 Python</title>
    	<style>
    	.jan {
    		background-color: yellow;
    	}
    	.feb {
    		font-size: 25px;
    	}
    	.month {
    		color: red;
    	}
    	</style>
    </head>
    
    <body>
    
    <h1>列表 爬虫练习</h1>
    
    <p>这是一个在 <a href="https://morvanzhou.github.io/" >莫烦 Python</a> 的 <a href="https://morvanzhou.github.io/tutorials/scraping" >爬虫教程</a>
    	里无敌简单的网页, 所有的 code 让你一目了然, 清晰无比.</p>
    
    <ul>
    	<li class="month">一月</li>
    	<ul class="jan">
    		<li>一月一号</li>
    		<li>一月二号</li>
    		<li>一月三号</li>
    	</ul>
    	<li class="feb month">二月</li>
    	<li class="month">三月</li>
    	<li class="month">四月</li>
    	<li class="month">五月</li>
    </ul>
    
    </body>
    </html>


**Parsing this html using a method called lxml, create a soup object. Find all "li" tag which has a class=month.**


```python
soup = BeautifulSoup(html, features='lxml')

# use class to narrow search
month = soup.find_all('li', {"class": "month"})
for m in month:
    print(m.get_text())
```

    一月
    二月
    三月
    四月
    五月


**Or using some helpful functions to find tags. Access the attribute of found tags using a key just like what you do in a python dictionary.**


```python

jan = soup.find('ul', {"class": 'jan'})
d_jan = jan.find_all('li')              # use jan as a parent
for d in d_jan:
    print(d.get_text())

```

    一月一号
    一月二号
    一月三号


# Beautifulsoup: find by regual expression
**First we import re for regex. Then, open a [page](https://morvanzhou.github.io/static/scraping/table.html), then we can apply beautifulsoup on this page's html.**


```python
from bs4 import BeautifulSoup
from urllib.request import urlopen
import re

# if has Chinese, apply decode()
html = urlopen("https://morvanzhou.github.io/static/scraping/table.html").read().decode('utf-8')
print(html)
```

    <!DOCTYPE html>
    <html lang="cn">
    <head>
    	<meta charset="UTF-8">
    	<title>爬虫练习 表格 table | 莫烦 Python</title>
    
    	<style>
    	img {
    		width: 250px;
    	}
    	table{
    		width:50%;
    	}
    	td{
    		margin:10px;
    		padding:15px;
    	}
    	</style>
    </head>
    <body>
    
    <h1>表格 爬虫练习</h1>
    
    <p>这是一个在 <a href="https://morvanzhou.github.io/" >莫烦 Python</a> 的 <a href="https://morvanzhou.github.io/tutorials/scraping" >爬虫教程</a>
    	里无敌简单的网页, 所有的 code 让你一目了然, 清晰无比.</p>
    
    <br>
    <table id="course-list">
    	<tr>
    		<th>
    			分类
    		</th><th>
    			名字
    		</th><th>
    			时长
    		</th><th>
    			预览
    		</th>
    	</tr>
    
    	<tr id="course1" class="ml">
    		<td>
    			机器学习
    		</td><td>
    			<a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/">
    				Tensorflow 神经网络</a>
    		</td><td>
    			2:00
    		</td><td>
    			<img src="https://morvanzhou.github.io/static/img/course_cover/tf.jpg">
    		</td>
    	</tr>
    
    	<tr id="course2" class="ml">
    		<td>
    			机器学习
    		</td><td>
    			<a href="https://morvanzhou.github.io/tutorials/machine-learning/reinforcement-learning/">
    				强化学习</a>
    		</td><td>
    			5:00
    		</td><td>
    			<img src="https://morvanzhou.github.io/static/img/course_cover/rl.jpg">
    		</td>
    	</tr>
    
    	<tr id="course3" class="data">
    		<td>
    			数据处理
    		</td><td>
    			<a href="https://morvanzhou.github.io/tutorials/data-manipulation/scraping/">
    				爬虫</a>
    		</td><td>
    			3:00
    		</td><td>
    			<img src="https://morvanzhou.github.io/static/img/course_cover/scraping.jpg">
    		</td>
    	</tr>
    
    </table>
    
    </body>
    </html>


**Parsing this html using a method called lxml, create a soup object. Find all "img" tag which has a src in a given pattern.**


```python
soup = BeautifulSoup(html, features='lxml')

img_links = soup.find_all("img", {"src": re.compile('.*?\.jpg')})
for link in img_links:
    print(link['src'])
```

    https://morvanzhou.github.io/static/img/course_cover/tf.jpg
    https://morvanzhou.github.io/static/img/course_cover/rl.jpg
    https://morvanzhou.github.io/static/img/course_cover/scraping.jpg


**Or using some helpful functions to find tags. Access the attribute of found tags using a key just like what you do in a python dictionary.**


```python
course_links = soup.find_all('a', {'href': re.compile('https://morvan.*')})
for link in course_links:
    print(link['href'])
```

    https://morvanzhou.github.io/
    https://morvanzhou.github.io/tutorials/scraping
    https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/
    https://morvanzhou.github.io/tutorials/machine-learning/reinforcement-learning/
    https://morvanzhou.github.io/tutorials/data-manipulation/scraping/



# Practice: scrape Baidu Baike
**Here we build a scraper to crawl Baidu Baike from this [page](https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711) onwards. We store a historical webpage that we have already visited to keep tracking it.**


```python
from bs4 import BeautifulSoup
from urllib.request import urlopen
import re
import random


base_url = "https://baike.baidu.com"
his = ["/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711"]
```

**Select the last sub url in "his", print the title and url.**


```python
url = base_url + his[-1]

html = urlopen(url).read().decode('utf-8')
soup = BeautifulSoup(html, features='lxml')
print(soup.find('h1').get_text(), '    url: ', his[-1])
```

    网络爬虫     url:  /item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711


**Find all sub_urls for baidu baike (item page), randomly select a sub_urls and store it in "his". If no valid sub link is found, than pop last url in "his".**


```python
# find valid urls
sub_urls = soup.find_all("a", {"target": "_blank", "href": re.compile("/item/(%.{2})+$")})

if len(sub_urls) != 0:
    his.append(random.sample(sub_urls, 1)[0]['href'])
else:
    # no valid sub link found
    his.pop()
print(his)
```

    ['/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711', '/item/%E9%80%9A%E7%94%A8%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E']


**Put everthing together. Random running for 20 iterations. See what we end up with.**


```python
his = ["/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/5162711"]

for i in range(20):
    url = base_url + his[-1]

    html = urlopen(url).read().decode('utf-8')
    soup = BeautifulSoup(html, features='lxml')
    print(i, soup.find('h1').get_text(), '    url: ', his[-1])

    # find valid urls
    sub_urls = soup.find_all("a", {"target": "_blank", "href": re.compile("/item/(%.{2})+$")})

    if len(sub_urls) != 0:
        his.append(random.sample(sub_urls, 1)[0]['href'])
    else:
        # no valid sub link found
        his.pop()
```



# requests: an alternative to urllib
**requests has more functions to replace urlopen. Use request.get() to replace urlopen() and pass some parameters to the webpage.  The webbrowser is to open the new url and give you an visualization of this result.**


```python
import requests
import webbrowser
param = {"wd": "莫烦Python"}
r = requests.get('http://www.baidu.com/s', params=param)
print(r.url)
webbrowser.open(r.url)
```

    http://www.baidu.com/s?wd=%E8%8E%AB%E7%83%A6Python





    True



## post

**We test the post function in this [page](http://pythonscraping.com/pages/files/form.html). To pass some data to the server to analyse and send some response to you accordingly.**


```python
data = {'firstname': '莫烦', 'lastname': '周'}
r = requests.post('http://pythonscraping.com/files/processing.php', data=data)
print(r.text)
```

    Hello there,  !


## upload image

**We still use post function to update image in this [page](http://pythonscraping.com/files/form2.html).**


```python
file = {'uploadFile': open('./image.png', 'rb')}
r = requests.post('http://pythonscraping.com/files/processing2.php', files=file)
print(r.text)
```


    ---------------------------------------------------------------------------

    FileNotFoundError                         Traceback (most recent call last)

    <ipython-input-8-1b09607bacd8> in <module>
    ----> 1 file = {'uploadFile': open('./image.png', 'rb')}
          2 r = requests.post('http://pythonscraping.com/files/processing2.php', files=file)
          3 print(r.text)


    FileNotFoundError: [Errno 2] No such file or directory: './image.png'


## login

**Use post method to login to a [website](http://pythonscraping.com/pages/cookies/login.html).**


```python
payload = {'username': 'Morvan', 'password': 'password'}
r = requests.post('http://pythonscraping.com/pages/cookies/welcome.php', data=payload)
print(r.cookies.get_dict())
r = requests.get('http://pythonscraping.com/pages/cookies/profile.php', cookies=r.cookies)
print(r.text)
```

    {'loggedin': '1', 'username': 'Morvan'}
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
      "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr"
      xmlns:content="http://purl.org/rss/1.0/modules/content/"
      xmlns:dc="http://purl.org/dc/terms/"
      xmlns:foaf="http://xmlns.com/foaf/0.1/"
      xmlns:og="http://ogp.me/ns#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:sioc="http://rdfs.org/sioc/ns#"
      xmlns:sioct="http://rdfs.org/sioc/types#"
      xmlns:skos="http://www.w3.org/2004/02/skos/core#"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema#">
    
    <head profile="http://www.w3.org/1999/xhtml/vocab">
      <meta charset="utf-8" />
    <link rel="shortcut icon" href="http://pythonscraping.com/misc/favicon.ico" type="image/vnd.microsoft.icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="MobileOptimized" content="width" />
    <meta name="Generator" content="Drupal 7 (http://drupal.org)" />
    <meta name="HandheldFriendly" content="true" />
      <title>Page not found | Web Scraping with Python</title>
      <style type="text/css" media="all">
    @import url("http://pythonscraping.com/modules/system/system.base.css?pa2nir");
    @import url("http://pythonscraping.com/modules/system/system.menus.css?pa2nir");
    @import url("http://pythonscraping.com/modules/system/system.messages.css?pa2nir");
    @import url("http://pythonscraping.com/modules/system/system.theme.css?pa2nir");
    </style>
    <style type="text/css" media="all">
    @import url("http://pythonscraping.com/modules/comment/comment.css?pa2nir");
    @import url("http://pythonscraping.com/modules/field/theme/field.css?pa2nir");
    @import url("http://pythonscraping.com/modules/node/node.css?pa2nir");
    @import url("http://pythonscraping.com/modules/search/search.css?pa2nir");
    @import url("http://pythonscraping.com/modules/user/user.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/modules/views/css/views.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/modules/ckeditor/css/ckeditor.css?pa2nir");
    </style>
    <style type="text/css" media="all">
    @import url("http://pythonscraping.com/sites/all/modules/ctools/css/ctools.css?pa2nir");
    </style>
    <style type="text/css" media="all">
    @import url("http://pythonscraping.com/sites/all/themes/skeletontheme/css/skeleton.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/themes/skeletontheme/css/style.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/themes/skeletontheme/css/buttons.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/themes/skeletontheme/css/layout.css?pa2nir");
    @import url("http://pythonscraping.com/sites/all/themes/skeletontheme/color/colors.css?pa2nir");
    </style>
      <script type="text/javascript" src="http://pythonscraping.com/misc/jquery.js?v=1.4.4"></script>
    <script type="text/javascript" src="http://pythonscraping.com/misc/jquery.once.js?v=1.2"></script>
    <script type="text/javascript" src="http://pythonscraping.com/misc/drupal.js?pa2nir"></script>
    <script type="text/javascript" src="http://pythonscraping.com/sites/all/themes/skeletontheme/js/jquery.mobilemenu.js?pa2nir"></script>
    <script type="text/javascript">
    <!--//--><![CDATA[//><!--
    jQuery(document).ready(function($) { 
    	
    	$("#navigation .content > ul").mobileMenu({
    		prependTo: "#navigation",
    		combine: false,
            switchWidth: 760,
            topOptionText: Drupal.settings.skeletontheme['topoptiontext']
    	});
    	
    	});
    //--><!]]>
    </script>
    <script type="text/javascript" src="http://pythonscraping.com/sites/all/modules/google_analytics/googleanalytics.js?pa2nir"></script>
    <script type="text/javascript">
    <!--//--><![CDATA[//><!--
    (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-57871098-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("set", "page", "/404.html?page=" + document.location.pathname + document.location.search + "&from=" + document.referrer);ga("send", "pageview");
    //--><!]]>
    </script>
    <script type="text/javascript">
    <!--//--><![CDATA[//><!--
    jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","skeletontheme":{"topoptiontext":"Select a page"},"ajaxPageState":{"theme":"skeletontheme","theme_token":"_46Vb4_WWOEVCfwli_P9ag7XVsh7SgxLoc_tUPu2n64","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/themes\/skeletontheme\/js\/jquery.mobilemenu.js":1,"0":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"1":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ckeditor\/css\/ckeditor.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/themes\/skeletontheme\/css\/skeleton.css":1,"sites\/all\/themes\/skeletontheme\/css\/style.css":1,"sites\/all\/themes\/skeletontheme\/css\/buttons.css":1,"sites\/all\/themes\/skeletontheme\/css\/layout.css":1,"sites\/all\/themes\/skeletontheme\/color\/colors.css":1}},"googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"}});
    //--><!]]>
    </script>
    </head>
    <body class="html not-front not-logged-in one-sidebar sidebar-first page-pages page-pages-cookies page-pages-cookies-profilephp" >
      <div id="skip-link">
        <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
      </div>
        <div id="wrap">
        <div class="container">
            
                    
            <div class="clear"></div>
            
            <!-- #header -->
                    <div id="header" class="sixteen columns clearfix">   
                    
                <div class="inner">
        
                                      <a href="/" title="Home" rel="home" id="logo">
                        <img src="http://pythonscraping.com/sites/default/files/lrg_0.jpg" alt="Home" />
                      </a>
                                    
                                    <div id="name-and-slogan">
                    
                                            <div id="site-name">
                        <a href="/" title="Home" rel="home">Web Scraping with Python</a>
                        </div>
                                            
                                        
                    </div>
                                </div>
            </div><!-- /#header -->
            
                    
            <div class="clear"></div>
            
            <!-- #navigation -->
            <div id="navigation" class="sixteen columns clearfix">
            
                <div class="menu-header">
                                				<div class="content">
    				                </div>
                            </div>
                
            </div><!-- /#navigation -->
            
                    <!-- #sidebar-first -->
            <div id="sidebar-first" class="five columns">
                  <div class="region region-sidebar-first">
        <div id="block-block-1" class="block block-block">
    
        <h2>Buy WSwP Directly from O&#039;Reilly:</h2>
      
      <div class="content">
        <iframe src="http://www.oreilly.com/authors/widgets/669.html" height="500px" width="200px" scrolling="no" frameborder="0"></iframe>  </div>
    </div>
      </div>
            </div><!-- /#sidebar-first -->
                    
                    <div id="content" class="eleven columns">
    		        
                        
                            
                <div id="main">
                
                                    
                                    
                                    <h1 class="title" id="page-title">
                      Page not found                </h1>
                                    
                                    
                                    <div class="tabs">
                                      </div>
                                    
                                    
                                    
                      <div class="region region-content">
        <div id="block-system-main" class="block block-system">
    
        
      <div class="content">
        The requested page "/pages/cookies/profile.php" could not be found.  </div>
    </div>
      </div>
                                    
                </div>
            
            </div><!-- /#content -->
            
                    
            <div class="clear"></div>
            
                    
    	</div>
            
    	<div id="footer" >
            <div class="container">
            	<div class="sixteen columns clearfix">
            
                    <div class="one_third">
                                    </div>
                    
                    <div class="one_third">
                                    </div>
                    
                    <div class="one_third last">
                                    </div>
            
                    <div class="clear"></div>
                    
                                    
                    <div class="clear"></div>
                    
                    <div id="credits">
                    2019                                 Web Scraping with Python<br/>
                                    &copy; Ryan Mitchell, All Rights Reserved. For questions about reproduction or use of any material on this site, please contact ryan.e.mitchell@gmail.com
                    </div>
            	</div>
            </div>
        </div>
        
    </div> <!-- /#wrap -->  </body>
    </html>
    


## another general way to login

**Use session instead requests. Keep you in a session and keep track the cookies.**


```python
session = requests.Session()
payload = {'username': 'Morvan', 'password': 'password'}
r = session.post('http://pythonscraping.com/pages/cookies/welcome.php', data=payload)
print(r.cookies.get_dict())
r = session.get("http://pythonscraping.com/pages/cookies/profile.php")
print(r.text)
```

    {'username': 'Morvan', 'loggedin': '1'}
    Hey Morvan! Looks like you're still logged into the site!



# Download something

**Introduce multiple ways to download something using python.**


```python
import os
os.makedirs('./img/', exist_ok=True)

IMAGE_URL = "https://morvanzhou.github.io/static/img/description/learning_step_flowchart.png"
```

## urlretrieve

**Download the image url using urlretrieve.**


```python
from urllib.request import urlretrieve
urlretrieve(IMAGE_URL, './img/image1.png')      # whole document
```




    ('./img/image1.png', <http.client.HTTPMessage at 0x106640438>)



![image1](/img/image1.png)

## request download

**Using requests.get to download at once.**


```python
import requests
r = requests.get(IMAGE_URL)
with open('./img/image2.png', 'wb') as f:
    f.write(r.content)                      # whole document
```

## download chunck by chunck

**Set stream = True in get() function. This is more efficient.**


```python
r = requests.get(IMAGE_URL, stream=True)    # stream loading

with open('./img/image3.png', 'wb') as f:
    for chunk in r.iter_content(chunk_size=32):
        f.write(chunk)
```


# Practice: download images from web

**Download amazing pictures from [national geographic](http://www.nationalgeographic.com.cn/animals/)**


```python
from bs4 import BeautifulSoup
import requests

URL = "http://www.nationalgeographic.com.cn/animals/"
```

## find list of image holder


```python
html = requests.get(URL).text
soup = BeautifulSoup(html, 'lxml')
img_ul = soup.find_all('ul', {"class": "img_list"})
```

**Create a folder for these pictures**


```python
import os

os.makedirs('./img/', exist_ok=True)
```

## download

**Find all picture urls and download them.**


```python
for ul in img_ul:
    imgs = ul.find_all('img')
    for img in imgs:
        url = img['src']
        r = requests.get(url, stream=True)
        image_name = url.split('/')[-1]
        with open('./img/%s' % image_name, 'wb') as f:
            for chunk in r.iter_content(chunk_size=128):
                f.write(chunk)
        print('Saved %s' % image_name)
```

    Saved 20171227102206573.jpg
    Saved 20171226032741976.jpg
    Saved 20171220114008366.jpg
    Saved 20171219102251229.jpg
    Saved 20171215043409613.jpg
    Saved 20171214020322682.jpg


![image](/img/20171214020322682.jpg)


```python

```
# Distributed scraping: multiprocessing

**Speed up scraping by distributed crawling and parsing. I'm going to scrape [my website](https://morvanzhou.github.io/) but in a local server "http://127.0.0.1:4000/" to eliminate different downloading speed. This test is more accurate in time measuring. You can use "https://morvanzhou.github.io/" instead, because you cannot access "http://127.0.0.1:4000/".**

**We gonna scrape all web pages in my website and reture the title and url for each page.**


```python
import multiprocessing as mp
import time
from urllib.request import urlopen, urljoin
from bs4 import BeautifulSoup
import re

base_url = "http://127.0.0.1:4000/"
# base_url = 'https://morvanzhou.github.io/'

# DON'T OVER CRAWL THE WEBSITE OR YOU MAY NEVER VISIT AGAIN
if base_url != "http://127.0.0.1:4000/":
    restricted_crawl = True
else:
    restricted_crawl = False
```

**Create a crawl function to open a url in parallel.**


```python
def crawl(url):
    response = urlopen(url)
    time.sleep(0.1)             # slightly delay for downloading
    return response.read().decode()
```

**Create a parse function to find all results we need in parallel**


```python
def parse(html):
    soup = BeautifulSoup(html, 'lxml')
    urls = soup.find_all('a', {"href": re.compile('^/.+?/$')})
    title = soup.find('h1').get_text().strip()
    page_urls = set([urljoin(base_url, url['href']) for url in urls])
    url = soup.find('meta', {'property': "og:url"})['content']
    return title, page_urls, url
```

## Normal way

**Do not use multiprocessing, test the speed. Firstly, set what urls we have already seen and what we haven't in a python set.**


```python
unseen = set([base_url,])
seen = set()

count, t1 = 1, time.time()

while len(unseen) != 0:                 # still get some url to visit
    if restricted_crawl and len(seen) > 20:
            break
        
    print('\nDistributed Crawling...')
    htmls = [crawl(url) for url in unseen]

    print('\nDistributed Parsing...')
    results = [parse(html) for html in htmls]

    print('\nAnalysing...')
    seen.update(unseen)         # seen the crawled
    unseen.clear()              # nothing unseen

    for title, page_urls, url in results:
        print(count, title, url)
        count += 1
        unseen.update(page_urls - seen)     # get new url to crawl
print('Total time: %.1f s' % (time.time()-t1, ))    # 53 s
```

    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    1 教程 http://localhost:4000
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    2 其他教学系列 http://localhost:4000tutorials/others/
    3 Linux 简易教学 http://localhost:4000tutorials/others/linux-basic/
    4 近期更新 http://localhost:4000recent-posts/
    5 正则表达式 http://localhost:4000tutorials/python-basic/basic/13-10-regular-expression/
    6 从头开始做一个汽车状态分类器1: 分析数据 http://localhost:4000tutorials/machine-learning/ML-practice/build-car-classifier-from-scratch1/
    7 Threading 多线程教程系列 http://localhost:4000tutorials/python-basic/threading/
    8 强化学习 Reinforcement Learning 教程系列 http://localhost:4000tutorials/machine-learning/reinforcement-learning/
    9 从头开始做一个汽车状态分类器2: 搭建模型 http://localhost:4000tutorials/machine-learning/ML-practice/build-car-classifier-from-scratch2/
    10 我的一点点背景资料 (Mofan's Background) http://localhost:4000about/
    11 Numpy & Pandas 教程系列 http://localhost:4000tutorials/data-manipulation/np-pd/
    12 推荐学习顺序 http://localhost:4000learning-steps/
    13 为了更优秀 http://localhost:4000support/
    14 机器学习实践 http://localhost:4000tutorials/machine-learning/ML-practice/
    15 Git 版本管理 教程系列 http://localhost:4000tutorials/others/git/
    16 multiprocessing 多进程教程系列 http://localhost:4000tutorials/python-basic/multiprocessing/
    17 网页爬虫教程系列 http://localhost:4000tutorials/data-manipulation/scraping/
    18 进化算法 Evolutionary Strategies 教程系列 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/
    19 Keras 教程系列 http://localhost:4000tutorials/machine-learning/keras/
    20 Python基础 教程系列 http://localhost:4000tutorials/python-basic/
    21 Pytorch 教程系列 http://localhost:4000tutorials/machine-learning/torch/
    22 Tkinter GUI 教程系列 http://localhost:4000tutorials/python-basic/tkinter/
    23 有趣的机器学习系列 http://localhost:4000tutorials/machine-learning/ML-intro/
    24 数据处理教程系列 http://localhost:4000tutorials/data-manipulation/
    25 从头开始做一个机器手臂5 完善测试 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch5/
    26 基础教程系列 http://localhost:4000tutorials/python-basic/basic/
    27 机器学习系列 http://localhost:4000tutorials/machine-learning/
    28 Sklearn 通用机器学习 教程系列 http://localhost:4000tutorials/machine-learning/sklearn/
    29 Tensorflow 教程系列 http://localhost:4000tutorials/machine-learning/tensorflow/
    30 从头开始做一个机器手臂1 搭建结构 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch1/
    31 说吧~ http://localhost:4000discuss/
    32 Matplotlib 画图教程系列 http://localhost:4000tutorials/data-manipulation/plt/
    33 Theano 教程系列 http://localhost:4000tutorials/machine-learning/theano/
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    34 Actor Critic (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-1-actor-critic/
    35 Numpy 基础运算1 http://localhost:4000tutorials/data-manipulation/np-pd/2-3-np-math1/
    36 读写文件 3 http://localhost:4000tutorials/python-basic/basic/08-3-read-file3/
    37 小例子 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-1-general-rl/
    38 Why Keras? http://localhost:4000tutorials/machine-learning/keras/1-1-why/
    39 什么是 强化学习 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-A-RL/
    40 Actor Critic http://localhost:4000tutorials/machine-learning/ML-intro/4-08-AC/
    41 临时修改 (stash) http://localhost:4000tutorials/others/git/4-4-stash/
    42 什么是 DQN http://localhost:4000tutorials/machine-learning/torch/4-05-A-DQN/
    43 messagebox 弹窗 http://localhost:4000tutorials/python-basic/tkinter/2-10-messagebox/
    44 Canvas 画布 http://localhost:4000tutorials/python-basic/tkinter/2-07-canvas/
    45 交叉验证 2 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-3-cross-validation2/
    46 Image 图片 http://localhost:4000tutorials/data-manipulation/plt/3-4-image/
    47 线程锁 Lock http://localhost:4000tutorials/python-basic/threading/6-lock/
    48 什么是 Asynchronous Advantage Actor-Critic (A3C) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-3-A1-A3C/
    49 神经进化 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-01-neuro-evolution/
    50 Prioritized Experience Replay (DQN) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-6-prioritized-replay/
    51 RNN 循环神经网络 (回归) http://localhost:4000tutorials/machine-learning/torch/4-03-RNN-regression/
    52 Classification 分类学习 http://localhost:4000tutorials/machine-learning/tensorflow/5-01-classifier/
    53 什么是 Policy Gradients http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-1-A-PG/
    54 Sarsa http://localhost:4000tutorials/machine-learning/ML-intro/4-04-sarsa/
    55 LSTM RNN 循环神经网络 (LSTM) http://localhost:4000tutorials/machine-learning/ML-intro/2-4-LSTM/
    56 神经网络在干嘛 http://localhost:4000tutorials/machine-learning/tensorflow/1-3-what-does-NN-do/
    57 为什么用 Matplotlib http://localhost:4000tutorials/data-manipulation/plt/1-1-why/
    58 while 循环 http://localhost:4000tutorials/python-basic/basic/03-1-while/
    59 Legend 图例 http://localhost:4000tutorials/data-manipulation/plt/2-5-lagend/
    60 基本用法 http://localhost:4000tutorials/data-manipulation/plt/2-1-basic-usage/
    61 什么是 tkinter 窗口 http://localhost:4000tutorials/python-basic/basic/13-07-tkinter/
    62 模块安装 http://localhost:4000tutorials/python-basic/basic/07-1-module-install/
    63 课程要求 http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-2-requirment/
    64 GAN (Generative Adversarial Nets 生成对抗网络) http://localhost:4000tutorials/machine-learning/torch/4-06-GAN/
    65 Pandas 基本介绍 http://localhost:4000tutorials/data-manipulation/np-pd/3-1-pd-intro/
    66 if elif else 判断 http://localhost:4000tutorials/python-basic/basic/04-3-if-elif-else/
    67 自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/ML-intro/2-5-autoencoder/
    68 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/keras/2-6-A-autoencoder/
    69 自编码 Autoencoder (非监督学习) http://localhost:4000tutorials/machine-learning/tensorflow/5-11-autoencoder/
    70 Dueling DQN (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-7-dueling-DQN/
    71 for 循环 http://localhost:4000tutorials/python-basic/basic/03-2-for/
    72 Linux 基本指令 mkdir, rmdir 和 rm http://localhost:4000tutorials/others/linux-basic/2-03-basic-command/
    73 Numpy 基础运算2 http://localhost:4000tutorials/data-manipulation/np-pd/2-4-np-math2/
    74 Github 在线代码管理 http://localhost:4000tutorials/others/git/5-1-github/
    75 CNN 卷积神经网络 3 http://localhost:4000tutorials/machine-learning/tensorflow/5-05-CNN3/
    76 Asynchronous Advantage Actor-Critic (A3C) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-3-A3C/
    77 Regressor 回归 http://localhost:4000tutorials/machine-learning/keras/2-1-regressor/
    78 Q-learning 思维决策 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-3-tabular-q2/
    79 Subplot 分格显示 http://localhost:4000tutorials/data-manipulation/plt/4-2-subplot2/
    80 Pandas plot 出图 http://localhost:4000tutorials/data-manipulation/np-pd/3-8-pd-plot/
    81 批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/ML-intro/3-08-batch-normalization/
    82 Policy Gradients http://localhost:4000tutorials/machine-learning/ML-intro/4-07-PG/
    83 什么是多线程 Threading http://localhost:4000tutorials/python-basic/threading/1-why/
    84 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/ML-intro/2-8-gradient-descent/
    85 为什么 Torch 是动态的 http://localhost:4000tutorials/machine-learning/torch/5-01-dynamic/
    86 保存提取 http://localhost:4000tutorials/machine-learning/torch/3-04-save-reload/
    87 添加线程 Thread http://localhost:4000tutorials/python-basic/threading/2-add-thread/
    88 DQN 神经网络 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-2-DQN2/
    89 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/torch/4-04-A-autoencoder/
    90 Autoencoder 自编码 http://localhost:4000tutorials/machine-learning/keras/2-6-autoencoder/
    91 元组 列表 http://localhost:4000tutorials/python-basic/basic/11-1-array-list/
    92 Sarsa-lambda http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-3-tabular-sarsa-lambda/
    93 设置坐标轴2 http://localhost:4000tutorials/data-manipulation/plt/2-4-axis2/
    94 函数参数 http://localhost:4000tutorials/python-basic/basic/05-2-def-parameters/
    95 神经网络在做什么 http://localhost:4000tutorials/machine-learning/theano/1-3-NN-job/
    96 GIL 不一定有效率 http://localhost:4000tutorials/python-basic/threading/5-GIL/
    97 Pandas 设置值 http://localhost:4000tutorials/data-manipulation/np-pd/3-3-pd-assign/
    98 Pandas 选择数据 http://localhost:4000tutorials/data-manipulation/np-pd/3-2-pd-indexing/
    99 CNN 卷积神经网络 http://localhost:4000tutorials/machine-learning/torch/4-01-CNN/
    100 Placeholder 传入值 http://localhost:4000tutorials/machine-learning/tensorflow/2-5-placeholde/
    101 Tensorboard 可视化好帮手 1 http://localhost:4000tutorials/machine-learning/tensorflow/4-1-tensorboard1/
    102 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/theano/1-1-A-ANN-and-NN/
    103 回到从前 (checkout 针对单个文件) http://localhost:4000tutorials/others/git/3-2-checkout/
    104 为什么用强化学习 Why? http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-why/
    105 Linux 基本指令 touch, cp 和 mv http://localhost:4000tutorials/others/linux-basic/2-02-basic-command/
    106 OpenAI gym 环境库 http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-4-gym/
    107 NEAT 强化学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-03-neat-reinforcement-learning/
    108 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/5-03-A-CNN/
    109 Tensorflow 2017 更新 http://localhost:4000tutorials/machine-learning/tensorflow/5-14-tf2017/
    110 continue & break http://localhost:4000tutorials/python-basic/basic/13-01-continue-break/
    111 multiprocessing 什么是多进程 http://localhost:4000tutorials/python-basic/basic/13-06-multiprocessing/
    112 Saver 保存读取 http://localhost:4000tutorials/machine-learning/tensorflow/5-06-save/
    113 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-A-ANN-and-NN/
    114 什么是 Sarsa http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-1-A-sarsa/
    115 神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-1-NN/
    116 通用学习模式 http://localhost:4000tutorials/machine-learning/sklearn/2-2-general-pattern/
    117 第一个版本库 Repository http://localhost:4000tutorials/others/git/2-1-repository/
    118 Dropout 缓解过拟合 http://localhost:4000tutorials/machine-learning/torch/5-03-dropout/
    119 Sarsa 算法更新 http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-1-tabular-sarsa1/
    120 set 找不同 http://localhost:4000tutorials/python-basic/basic/13-09-set/
    121 多维列表 http://localhost:4000tutorials/python-basic/basic/11-3-multi-dim-list/
    122 检验神经网络 (Evaluation) http://localhost:4000tutorials/machine-learning/sklearn/3-2-A-Evaluate-NN/
    123 3D 数据 http://localhost:4000tutorials/data-manipulation/plt/3-5-3d/
    124 Regression 回归例子 http://localhost:4000tutorials/machine-learning/theano/3-2-regression/
    125 激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/ML-intro/3-04-activation-function/
    126 Scatter 散点图 http://localhost:4000tutorials/data-manipulation/plt/3-1-scatter/
    127 什么是神经网络进化 (Neuro-Evolution) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-00-neuro-evolution/
    128 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/5-07-A-RNN/
    129 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/1-1-B-NN/
    130 DQN 算法更新 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-1-DQN1/
    131 怎么样从 MacOS 或 Linux 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-01-ssh-from-linux-or-mac/
    132 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/keras/1-1-B-NN/
    133 区分类型 (分类) http://localhost:4000tutorials/machine-learning/torch/3-02-classification/
    134 Optimizer 优化器 http://localhost:4000tutorials/machine-learning/torch/3-06-optimizer/
    135 AlphaGo Zero 为什么更厉害? http://localhost:4000tutorials/machine-learning/ML-intro/4-11-AlphaGo-zero/
    136 Deep Deterministic Policy Gradient (DDPG) http://localhost:4000tutorials/machine-learning/ML-intro/4-09-DDPG/
    137 if 判断 http://localhost:4000tutorials/python-basic/basic/04-1-if/
    138 class 类 init 功能 http://localhost:4000tutorials/python-basic/basic/09-2-class-init/
    139 Numpy copy & deep copy http://localhost:4000tutorials/data-manipulation/np-pd/2-8-np-copy/
    140 Tensorboard 可视化好帮手 2 http://localhost:4000tutorials/machine-learning/tensorflow/4-2-tensorboard2/
    141 Frame 框架 http://localhost:4000tutorials/python-basic/tkinter/2-09-frame/
    142 Microbial Genetic Algorithm http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-04-microbial-genetic-algorithm/
    143 NEAT 监督学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-02-neat-supervised-learning/
    144 安装 http://localhost:4000tutorials/python-basic/basic/01-1-install/
    145 怎么样从 Windows 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-02-ssh-from-windows/
    146 什么是 Actor Critic http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-1-A-AC/
    147 遗传算法 (Genetic Algorithm) http://localhost:4000tutorials/machine-learning/ML-intro/5-01-genetic-algorithm/
    148 CNN 卷积神经网络 http://localhost:4000tutorials/machine-learning/keras/2-3-CNN/
    149 选择好特征 (Good Features) http://localhost:4000tutorials/machine-learning/ML-intro/3-03-choose-feature/
    150 什么是 Q Leaning http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-2-A-q-learning/
    151 Evolution Strategy 强化学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-04-evolution-strategy-reinforcement-learning/
    152 兼容 backend http://localhost:4000tutorials/machine-learning/keras/1-3-backend/
    153 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/theano/3-5-A-overfitting/
    154 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/theano/1-1-C-gradient-descent/
    155 Numpy 和 Pandas 安装 http://localhost:4000tutorials/data-manipulation/np-pd/1-2-install/
    156 例子 旅行商人问题 (Travel Sales Problem) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-03-genetic-algorithm-travel-sales-problem/
    157 Distributed Proximal Policy Optimization (DPPO) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-4-DPPO/
    158 Pytorch 安装 http://localhost:4000tutorials/machine-learning/torch/1-2-install/
    159 基础数学运算 http://localhost:4000tutorials/python-basic/basic/02-2-basic-math/
    160 激励函数 (Activation) http://localhost:4000tutorials/machine-learning/torch/2-03-activation/
    161 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-D-feature-representation/
    162 例子3 结果可视化 http://localhost:4000tutorials/machine-learning/tensorflow/3-3-visualize-result/
    163 Activation function 激励函数 http://localhost:4000tutorials/machine-learning/theano/2-4-activation/
    164 可视化结果 回归例子 http://localhost:4000tutorials/machine-learning/theano/3-3-visualize/
    165 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/torch/4-02-A-RNN/
    166 什么是 Deep Deterministic Policy Gradient (DDPG) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-2-A-DDPG/
    167 例子 登录窗口1 http://localhost:4000tutorials/python-basic/tkinter/3-01-example1/
    168 怎么样用 TeamViewer 和 VNC 从远程控制电脑 http://localhost:4000tutorials/others/linux-basic/4-04-teamviewer-vnc/
    169 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/keras/2-4-A-RNN/
    170 Pandas 导入导出 http://localhost:4000tutorials/data-manipulation/np-pd/3-5-pd-to/
    171 选择学习方法 http://localhost:4000tutorials/machine-learning/sklearn/2-1-select-method/
    172 class 类 http://localhost:4000tutorials/python-basic/basic/09-1-class/
    173 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/theano/2-4-A-activation-function/
    174 特征标准化 (Feature Normalization) http://localhost:4000tutorials/machine-learning/ML-intro/3-02-normalization/
    175 Policy Gradients 思维决策 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-2-policy-gradient-softmax2/
    176 RNN LSTM (回归例子可视化) http://localhost:4000tutorials/machine-learning/tensorflow/5-10-RNN4/
    177 关系拟合 (回归) http://localhost:4000tutorials/machine-learning/torch/3-01-regression/
    178 正规化 Normalization http://localhost:4000tutorials/machine-learning/sklearn/3-1-normalization/
    179 GPU 加速运算 http://localhost:4000tutorials/machine-learning/torch/5-02-GPU/
    180 DQN 强化学习 http://localhost:4000tutorials/machine-learning/torch/4-05-DQN/
    181 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/ML-intro/2-7-feature-representation/
    182 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/ML-intro/3-06-speed-up-learning/
    183 交叉验证 1 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-2-cross-validation1/
    184 读写文件 1 http://localhost:4000tutorials/python-basic/basic/08-1-read-file/
    185 回到从前 (reset) http://localhost:4000tutorials/others/git/3-1-reset/
    186 什么是 Tkinter http://localhost:4000tutorials/python-basic/tkinter/1-1-why/
    187 Theano 安装 http://localhost:4000tutorials/machine-learning/theano/1-2-install/
    188 Save 保存 提取 http://localhost:4000tutorials/machine-learning/theano/3-6-save/
    189 sklearn 常用属性与功能 http://localhost:4000tutorials/machine-learning/sklearn/2-4-model-attributes/
    190 变量 (Variable) http://localhost:4000tutorials/machine-learning/torch/2-02-variable/
    191 threading 什么是多线程 http://localhost:4000tutorials/python-basic/basic/13-05-threading/
    192 RNN LSTM 循环神经网络 (分类例子) http://localhost:4000tutorials/machine-learning/tensorflow/5-08-RNN2/
    193 记录修改 (log & diff) http://localhost:4000tutorials/others/git/2-2-modified/
    194 dictionary 字典 http://localhost:4000tutorials/python-basic/basic/11-4-dictionary/
    195 Session 会话控制 http://localhost:4000tutorials/machine-learning/tensorflow/2-3-session/
    196 神经网络进化 (Neuro-Evolution) http://localhost:4000tutorials/machine-learning/ML-intro/5-03-neuro-evolution/
    197 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-C-gradient-descent/
    198 例子3 添加层 def add_layer() http://localhost:4000tutorials/machine-learning/tensorflow/3-1-add-layer/
    199 Scale 尺度 http://localhost:4000tutorials/python-basic/tkinter/2-05-scale/
    200 例子 配对句子 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-02-genetic-algorithm-match-phrase/
    201 rebase 分支冲突 http://localhost:4000tutorials/others/git/4-3-rebase/
    202 Batch Normalization 批标准化 http://localhost:4000tutorials/machine-learning/torch/5-04-batch-normalization/
    203 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/theano/1-1-D-feature-representation/
    204 自己的云计算, 把 Linux 当成你的云计算平台 http://localhost:4000tutorials/others/linux-basic/5-01-remote-learning/
    205 例子 登录窗口2 http://localhost:4000tutorials/python-basic/tkinter/3-02-example2/
    206 机器学习 (Machine Learning) http://localhost:4000tutorials/machine-learning/sklearn/1-1-A-ML/
    207 自己的模块 http://localhost:4000tutorials/python-basic/basic/12-2-personal-module/
    208 Matplotlib 安装 http://localhost:4000tutorials/data-manipulation/plt/1-2-install/
    209 进化策略 (Evolution Strategy) http://localhost:4000tutorials/machine-learning/ML-intro/5-02-evolution-strategy/
    210 list 列表 http://localhost:4000tutorials/python-basic/basic/11-2-list/
    211 Double DQN (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-5-double_DQN/
    212 Numpy 的创建 array http://localhost:4000tutorials/data-manipulation/np-pd/2-2-np-array/
    213 遗传算法 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-01-genetic-algorithm/
    214 Torch 或 Numpy http://localhost:4000tutorials/machine-learning/torch/2-01-torch-numpy/
    215 快速搭建法 http://localhost:4000tutorials/machine-learning/torch/3-03-fast-nn/
    216 例子 登录窗口3 http://localhost:4000tutorials/python-basic/tkinter/3-03-example3/
    217 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/ML-intro/2-0-ANN-and-NN/
    218 zip lambda map http://localhost:4000tutorials/python-basic/basic/13-03-zip-lambda-map/
    219 Batch Normalization 批标准化 http://localhost:4000tutorials/machine-learning/tensorflow/5-13-BN/
    220 pack grid place 放置位置 http://localhost:4000tutorials/python-basic/tkinter/2-11-pack-grid-place/
    221 scope 命名方法 http://localhost:4000tutorials/machine-learning/tensorflow/5-12-scope/
    222 Subplot 多合一显示 http://localhost:4000tutorials/data-manipulation/plt/4-1-subpot1/
    223 L1 / L2 正规化 (Regularization) http://localhost:4000tutorials/machine-learning/ML-intro/3-09-l1l2regularization/
    224 强化学习方法汇总 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/ML-intro/4-02-RL-methods/
    225 次坐标轴 http://localhost:4000tutorials/data-manipulation/plt/4-4-sencondary-axis/
    226 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-4-B-LSTM/
    227 Asynchronous Advantage Actor-Critic (A3C) http://localhost:4000tutorials/machine-learning/ML-intro/4-10-A3C/
    228 强化学习 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/ML-intro/4-01-RL/
    229 Numpy array 分割 http://localhost:4000tutorials/data-manipulation/np-pd/2-7-np-split/
    230 Numpy array 合并 http://localhost:4000tutorials/data-manipulation/np-pd/2-6-np-concat/
    231 if else 判断 http://localhost:4000tutorials/python-basic/basic/04-2-if-else/
    232 进程锁 Lock http://localhost:4000tutorials/python-basic/multiprocessing/7-lock/
    233 import 模块 http://localhost:4000tutorials/python-basic/basic/12-1-import/
    234 RNN Regressor 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-5-RNN-LSTM-Regressor/
    235 sklearn 强大数据库 http://localhost:4000tutorials/machine-learning/sklearn/2-3-database/
    236 Regularization 正规化 http://localhost:4000tutorials/machine-learning/theano/3-5-regularization/
    237 效率对比 threading & multiprocessing http://localhost:4000tutorials/python-basic/multiprocessing/4-comparison/
    238 Why Numpy & Pandas? http://localhost:4000tutorials/data-manipulation/np-pd/1-1-why/
    239 共享内存 shared memory http://localhost:4000tutorials/python-basic/multiprocessing/6-shared-memory/
    240 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/torch/2-03-A-activation-function/
    241 Menubar 菜单 http://localhost:4000tutorials/python-basic/tkinter/2-08-menubar/
    242 Annotation 标注 http://localhost:4000tutorials/data-manipulation/plt/2-6-annotation/
    243 RNN 循环神经网络 (分类) http://localhost:4000tutorials/machine-learning/torch/4-02-RNN-classification/
    244 什么是进化策略 (Evolution Strategy) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-00-evolution-strategy/
    245 例子3 建造神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/3-2-create-NN/
    246 (1+1)-ES http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-02-evolution-strategy-1+1-ES/
    247 保存模型 http://localhost:4000tutorials/machine-learning/sklearn/3-5-save/
    248 进化算法 简介 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/1-01-intro/
    249 Sarsa 思维决策 http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-2-tabular-sarsa2/
    250 Dropout 解决 overfitting http://localhost:4000tutorials/machine-learning/tensorflow/5-02-dropout/
    251 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/tensorflow/2-6-A-activation-function/
    252 进程池 Pool http://localhost:4000tutorials/python-basic/multiprocessing/5-pool/
    253 Asyncio http://localhost:4000tutorials/data-manipulation/scraping/asyncio/
    254 添加进程 Process http://localhost:4000tutorials/python-basic/multiprocessing/2-add/
    255 存储进程输出 Queue http://localhost:4000tutorials/python-basic/multiprocessing/3-queue/
    256 过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/ML-intro/3-05-overfitting/
    257 图中图 http://localhost:4000tutorials/data-manipulation/plt/4-3-plot-in-plot/
    258 Save & reload 保存提取 http://localhost:4000tutorials/machine-learning/keras/3-1-save/
    259 Checkbutton 勾选项 http://localhost:4000tutorials/python-basic/tkinter/2-06-checkbutton/
    260 分支 (branch) http://localhost:4000tutorials/others/git/4-1-branch/
    261 Q-learning 算法更新 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-2-tabular-q1/
    262 变量 variable http://localhost:4000tutorials/python-basic/basic/02-3-variable/
    263 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/torch/1-1-C-gradient-descent/
    264 生成对抗网络 (GAN) http://localhost:4000tutorials/machine-learning/ML-intro/2-6-GAN/
    265 什么是 Sarsa(lambda) http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-3-A-sarsa-lambda/
    266 Pandas 合并 merge http://localhost:4000tutorials/data-manipulation/np-pd/3-7-pd-merge/
    267 遗传算法 (Genetic Algorithm) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-00-genetic-algorithm/
    268 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/keras/1-1-D-feature-representation/
    269 什么是批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/torch/5-04-A-batch-normalization/
    270 自己的云计算, 多电脑共享你云端文件 http://localhost:4000tutorials/others/linux-basic/5-02-share-folder/
    271 从头开始做一个机器手臂3 写动态环境 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch3/
    272 定义 Layer 类 http://localhost:4000tutorials/machine-learning/theano/3-1-layer/
    273 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/torch/4-02-B-LSTM/
    274 pickle 保存数据 http://localhost:4000tutorials/python-basic/basic/13-08-pickle/
    275 Classifier 分类 http://localhost:4000tutorials/machine-learning/keras/2-2-classifier/
    276 CNN 卷积神经网络 1 http://localhost:4000tutorials/machine-learning/tensorflow/5-03-CNN1/
    277 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/torch/1-1-D-feature-representation/
    278 什么是生成对抗网络 (GAN) http://localhost:4000tutorials/machine-learning/torch/4-06-A-GAN/
    279 强化学习方法汇总 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-B-RL-methods/
    280 Keras 安装 http://localhost:4000tutorials/machine-learning/keras/1-2-install/
    281 Entry & Text 输入, 文本框 http://localhost:4000tutorials/python-basic/tkinter/2-02-entry-text/
    282 RNN 循环神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/5-07-RNN1/
    283 Policy Gradients 算法更新 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-1-policy-gradient-softmax1/
    284 Function 用法 http://localhost:4000tutorials/machine-learning/theano/2-2-function/
    285 优化器 optimizer http://localhost:4000tutorials/machine-learning/tensorflow/3-4-optimizer/
    286 Pandas 合并 concat http://localhost:4000tutorials/data-manipulation/np-pd/3-6-pd-concat/
    287 Tensorflow 安装 http://localhost:4000tutorials/machine-learning/tensorflow/1-2-install/
    288 从头开始做一个机器手臂4 加入强化学习算法 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch4/
    289 Deep Deterministic Policy Gradient (DDPG) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-2-DDPG/
    290 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/keras/2-3-A-CNN/
    291 什么是批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/tensorflow/5-13-A-batch-normalization/
    292 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/tensorflow/5-02-A-overfitting/
    293 函数默认参数 http://localhost:4000tutorials/python-basic/basic/05-3-def-default-parameters/
    294 Linux 文件权限 http://localhost:4000tutorials/others/linux-basic/3-01-file-permissions/
    295 Animation 动画 http://localhost:4000tutorials/data-manipulation/plt/5-1-animation/
    296 全局 & 局部 变量 http://localhost:4000tutorials/python-basic/basic/06-1-global-local/
    297 从头开始做一个机器手臂2 写静态环境 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch2/
    298 Natural Evolution Strategy http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-03-evolution-strategy-natural-evolution-strategy/
    299 Pandas 处理丢失数据 http://localhost:4000tutorials/data-manipulation/np-pd/3-4-pd-nan/
    300 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/theano/1-1-B-NN/
    301 Numpy 索引 http://localhost:4000tutorials/data-manipulation/np-pd/2-5-np-indexing/
    302 Radiobutton 选择按钮 http://localhost:4000tutorials/python-basic/tkinter/2-04-radiobutton/
    303 激励函数 Activation Function http://localhost:4000tutorials/machine-learning/tensorflow/2-6-activation/
    304 Why Theano? http://localhost:4000tutorials/machine-learning/theano/1-1-why/
    305 Classification 分类学习 http://localhost:4000tutorials/machine-learning/theano/3-4-classification/
    306 了解网页结构 http://localhost:4000tutorials/data-manipulation/scraping/1-01-understand-website/
    307 Variable 变量 http://localhost:4000tutorials/machine-learning/tensorflow/2-4-variable/
    308 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/tensorflow/3-4-A-speed-up-learning/
    309 Linux 基本指令 nano 和 cat http://localhost:4000tutorials/others/linux-basic/2-04-basic-command/
    310 处理结构 http://localhost:4000tutorials/machine-learning/tensorflow/2-1-structure/
    311 循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-3-RNN/
    312 Bar 柱状图 http://localhost:4000tutorials/data-manipulation/plt/3-2-Bar/
    313 Shared 变量 http://localhost:4000tutorials/machine-learning/theano/2-3-shared-variable/
    314 总结和更多 http://localhost:4000tutorials/machine-learning/theano/4-1-summary/
    315 print 功能 http://localhost:4000tutorials/python-basic/basic/02-1-print/
    316 merge 分支冲突 http://localhost:4000tutorials/others/git/4-2-merge-conflict/
    317 join 功能 http://localhost:4000tutorials/python-basic/threading/3-join/
    318 Why Git? http://localhost:4000tutorials/others/git/1-1-why/
    319 RNN Classifier 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-4-RNN-classifier/
    320 def 函数 http://localhost:4000tutorials/python-basic/basic/05-1-def/
    321 安装 Ubuntu 17.10 http://localhost:4000tutorials/others/linux-basic/1-2-install/
    322 Linux 基本指令 ls 和 cd http://localhost:4000tutorials/others/linux-basic/2-01-basic-command/
    323 Sklearn 安装 http://localhost:4000tutorials/machine-learning/sklearn/1-2-install/
    324 AutoEncoder (自编码/非监督学习) http://localhost:4000tutorials/machine-learning/torch/4-04-autoencoder/
    325 DQN http://localhost:4000tutorials/machine-learning/ML-intro/4-06-DQN/
    326 为什么用 Numpy 还是慢, 你用对了吗? http://localhost:4000tutorials/data-manipulation/np-pd/4-1-speed-up-numpy/
    327 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/torch/5-03-A-overfitting/
    328 机器学习 (Machine Learning) http://localhost:4000tutorials/machine-learning/ML-intro/1-1-machine-learning/
    329 Sarsa(lambda) http://localhost:4000tutorials/machine-learning/ML-intro/4-05-sarsa-lambda/
    330 卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-2-CNN/
    331 交叉验证 3 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-4-cross-validation3/
    332 例子2 http://localhost:4000tutorials/machine-learning/tensorflow/2-2-example2/
    333 什么是 DQN http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-1-A-DQN/
    334 为什么选 Tensorflow? http://localhost:4000tutorials/machine-learning/tensorflow/1-1-why/
    335 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/keras/1-1-A-ANN-and-NN/
    336 设置坐标轴1 http://localhost:4000tutorials/data-manipulation/plt/2-3-axis1/
    337 Why Sklearn? http://localhost:4000tutorials/machine-learning/sklearn/1-1-why/
    338 Q Leaning http://localhost:4000tutorials/machine-learning/ML-intro/4-03-q-learning/
    339 进化策略 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-01-evolution-strategy/
    340 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/keras/1-1-C-gradient-descent/
    341 什么是 Multiprocessing http://localhost:4000tutorials/python-basic/multiprocessing/1-why/
    342 Listbox 列表部件 http://localhost:4000tutorials/python-basic/tkinter/2-03-listbox/
    343 Numpy 属性 http://localhost:4000tutorials/data-manipulation/np-pd/2-1-np-attributes/
    344 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/torch/1-1-A-ANN-and-NN/
    345 RNN LSTM (回归例子) http://localhost:4000tutorials/machine-learning/tensorflow/5-09-RNN3/
    346 CNN 卷积神经网络 2 http://localhost:4000tutorials/machine-learning/tensorflow/5-04-CNN2/
    347 figure 图像 http://localhost:4000tutorials/data-manipulation/plt/2-2-figure/
    348 用 Tensorflow 可视化梯度下降 http://localhost:4000tutorials/machine-learning/tensorflow/5-15-tf-gradient-descent/
    349 储存进程结果 Queue http://localhost:4000tutorials/python-basic/threading/4-queue/
    350 Git 安装 http://localhost:4000tutorials/others/git/1-2-install/
    351 tick 能见度 http://localhost:4000tutorials/data-manipulation/plt/2-7-tick-visibility/
    352 给你的 Ubuntu 安装软件 http://localhost:4000tutorials/others/linux-basic/1-4-install-software/
    353 基本用法 http://localhost:4000tutorials/machine-learning/theano/2-1-basic-usage/
    354 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/torch/3-06-A-speed-up-learning/
    355 Contours 等高线图 http://localhost:4000tutorials/data-manipulation/plt/3-3-contours/
    356 处理不均衡数据 (Imbalanced data) http://localhost:4000tutorials/machine-learning/ML-intro/3-07-imbalanced-data/
    357 批训练 http://localhost:4000tutorials/machine-learning/torch/3-05-train-on-batch/
    358 DQN 思维决策 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-3-DQN3/
    359 快速了解 Ubuntu 17.10 基本界面 http://localhost:4000tutorials/others/linux-basic/1-3-system-overview/
    360 Why Pytorch? http://localhost:4000tutorials/machine-learning/torch/1-1-why/
    361 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/torch/4-01-A-CNN/
    362 Label & Button 标签和按钮 http://localhost:4000tutorials/python-basic/tkinter/2-01-label-button/
    363 读写文件 2 http://localhost:4000tutorials/python-basic/basic/08-2-read-file2/
    364 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/torch/1-1-B-NN/
    365 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/tensorflow/5-11-A-autoencoder/
    366 Why Linux? http://localhost:4000tutorials/others/linux-basic/1-1-why/
    367 怎么样从手机 (Android安卓/IOS苹果) 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-03-ssh-from-phone/
    368 copy & deepcopy 浅复制 & 深复制 http://localhost:4000tutorials/python-basic/basic/13-04-copy/
    369 检验神经网络 (Evaluation) http://localhost:4000tutorials/machine-learning/ML-intro/3-01-Evaluate-NN/
    370 input 输入 http://localhost:4000tutorials/python-basic/basic/10-1-input/
    371 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/5-07-B-LSTM/
    372 try 错误处理 http://localhost:4000tutorials/python-basic/basic/13-02-try/
    Total time: 52.3 s


## multiprocessing
**Create a process pool and scrape parallelly.**


```python
unseen = set([base_url,])
seen = set()

pool = mp.Pool(4)                       
count, t1 = 1, time.time()
while len(unseen) != 0:                 # still get some url to visit
    if restricted_crawl and len(seen) > 20:
            break
    print('\nDistributed Crawling...')
    crawl_jobs = [pool.apply_async(crawl, args=(url,)) for url in unseen]
    htmls = [j.get() for j in crawl_jobs]                                       # request connection

    print('\nDistributed Parsing...')
    parse_jobs = [pool.apply_async(parse, args=(html,)) for html in htmls]
    results = [j.get() for j in parse_jobs]                                     # parse html

    print('\nAnalysing...')
    seen.update(unseen)         # seen the crawled
    unseen.clear()              # nothing unseen

    for title, page_urls, url in results:
        print(count, title, url)
        count += 1
        unseen.update(page_urls - seen)     # get new url to crawl
print('Total time: %.1f s' % (time.time()-t1, ))    # 16 s !!!
```

    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    1 教程 http://localhost:4000
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    2 其他教学系列 http://localhost:4000tutorials/others/
    3 Linux 简易教学 http://localhost:4000tutorials/others/linux-basic/
    4 近期更新 http://localhost:4000recent-posts/
    5 正则表达式 http://localhost:4000tutorials/python-basic/basic/13-10-regular-expression/
    6 从头开始做一个汽车状态分类器1: 分析数据 http://localhost:4000tutorials/machine-learning/ML-practice/build-car-classifier-from-scratch1/
    7 Threading 多线程教程系列 http://localhost:4000tutorials/python-basic/threading/
    8 强化学习 Reinforcement Learning 教程系列 http://localhost:4000tutorials/machine-learning/reinforcement-learning/
    9 从头开始做一个汽车状态分类器2: 搭建模型 http://localhost:4000tutorials/machine-learning/ML-practice/build-car-classifier-from-scratch2/
    10 我的一点点背景资料 (Mofan's Background) http://localhost:4000about/
    11 Numpy & Pandas 教程系列 http://localhost:4000tutorials/data-manipulation/np-pd/
    12 推荐学习顺序 http://localhost:4000learning-steps/
    13 为了更优秀 http://localhost:4000support/
    14 机器学习实践 http://localhost:4000tutorials/machine-learning/ML-practice/
    15 Git 版本管理 教程系列 http://localhost:4000tutorials/others/git/
    16 multiprocessing 多进程教程系列 http://localhost:4000tutorials/python-basic/multiprocessing/
    17 网页爬虫教程系列 http://localhost:4000tutorials/data-manipulation/scraping/
    18 进化算法 Evolutionary Strategies 教程系列 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/
    19 Keras 教程系列 http://localhost:4000tutorials/machine-learning/keras/
    20 Python基础 教程系列 http://localhost:4000tutorials/python-basic/
    21 Pytorch 教程系列 http://localhost:4000tutorials/machine-learning/torch/
    22 Tkinter GUI 教程系列 http://localhost:4000tutorials/python-basic/tkinter/
    23 有趣的机器学习系列 http://localhost:4000tutorials/machine-learning/ML-intro/
    24 数据处理教程系列 http://localhost:4000tutorials/data-manipulation/
    25 从头开始做一个机器手臂5 完善测试 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch5/
    26 基础教程系列 http://localhost:4000tutorials/python-basic/basic/
    27 机器学习系列 http://localhost:4000tutorials/machine-learning/
    28 Sklearn 通用机器学习 教程系列 http://localhost:4000tutorials/machine-learning/sklearn/
    29 Tensorflow 教程系列 http://localhost:4000tutorials/machine-learning/tensorflow/
    30 从头开始做一个机器手臂1 搭建结构 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch1/
    31 说吧~ http://localhost:4000discuss/
    32 Matplotlib 画图教程系列 http://localhost:4000tutorials/data-manipulation/plt/
    33 Theano 教程系列 http://localhost:4000tutorials/machine-learning/theano/
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    34 Actor Critic (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-1-actor-critic/
    35 Numpy 基础运算1 http://localhost:4000tutorials/data-manipulation/np-pd/2-3-np-math1/
    36 读写文件 3 http://localhost:4000tutorials/python-basic/basic/08-3-read-file3/
    37 小例子 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-1-general-rl/
    38 Why Keras? http://localhost:4000tutorials/machine-learning/keras/1-1-why/
    39 什么是 强化学习 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-A-RL/
    40 Actor Critic http://localhost:4000tutorials/machine-learning/ML-intro/4-08-AC/
    41 临时修改 (stash) http://localhost:4000tutorials/others/git/4-4-stash/
    42 什么是 DQN http://localhost:4000tutorials/machine-learning/torch/4-05-A-DQN/
    43 messagebox 弹窗 http://localhost:4000tutorials/python-basic/tkinter/2-10-messagebox/
    44 Canvas 画布 http://localhost:4000tutorials/python-basic/tkinter/2-07-canvas/
    45 交叉验证 2 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-3-cross-validation2/
    46 Image 图片 http://localhost:4000tutorials/data-manipulation/plt/3-4-image/
    47 线程锁 Lock http://localhost:4000tutorials/python-basic/threading/6-lock/
    48 什么是 Asynchronous Advantage Actor-Critic (A3C) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-3-A1-A3C/
    49 神经进化 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-01-neuro-evolution/
    50 Prioritized Experience Replay (DQN) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-6-prioritized-replay/
    51 RNN 循环神经网络 (回归) http://localhost:4000tutorials/machine-learning/torch/4-03-RNN-regression/
    52 Classification 分类学习 http://localhost:4000tutorials/machine-learning/tensorflow/5-01-classifier/
    53 什么是 Policy Gradients http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-1-A-PG/
    54 Sarsa http://localhost:4000tutorials/machine-learning/ML-intro/4-04-sarsa/
    55 LSTM RNN 循环神经网络 (LSTM) http://localhost:4000tutorials/machine-learning/ML-intro/2-4-LSTM/
    56 神经网络在干嘛 http://localhost:4000tutorials/machine-learning/tensorflow/1-3-what-does-NN-do/
    57 为什么用 Matplotlib http://localhost:4000tutorials/data-manipulation/plt/1-1-why/
    58 while 循环 http://localhost:4000tutorials/python-basic/basic/03-1-while/
    59 Legend 图例 http://localhost:4000tutorials/data-manipulation/plt/2-5-lagend/
    60 基本用法 http://localhost:4000tutorials/data-manipulation/plt/2-1-basic-usage/
    61 什么是 tkinter 窗口 http://localhost:4000tutorials/python-basic/basic/13-07-tkinter/
    62 模块安装 http://localhost:4000tutorials/python-basic/basic/07-1-module-install/
    63 课程要求 http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-2-requirment/
    64 GAN (Generative Adversarial Nets 生成对抗网络) http://localhost:4000tutorials/machine-learning/torch/4-06-GAN/
    65 Pandas 基本介绍 http://localhost:4000tutorials/data-manipulation/np-pd/3-1-pd-intro/
    66 if elif else 判断 http://localhost:4000tutorials/python-basic/basic/04-3-if-elif-else/
    67 自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/ML-intro/2-5-autoencoder/
    68 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/keras/2-6-A-autoencoder/
    69 自编码 Autoencoder (非监督学习) http://localhost:4000tutorials/machine-learning/tensorflow/5-11-autoencoder/
    70 Dueling DQN (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-7-dueling-DQN/
    71 for 循环 http://localhost:4000tutorials/python-basic/basic/03-2-for/
    72 Linux 基本指令 mkdir, rmdir 和 rm http://localhost:4000tutorials/others/linux-basic/2-03-basic-command/
    73 Numpy 基础运算2 http://localhost:4000tutorials/data-manipulation/np-pd/2-4-np-math2/
    74 Github 在线代码管理 http://localhost:4000tutorials/others/git/5-1-github/
    75 CNN 卷积神经网络 3 http://localhost:4000tutorials/machine-learning/tensorflow/5-05-CNN3/
    76 Asynchronous Advantage Actor-Critic (A3C) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-3-A3C/
    77 Regressor 回归 http://localhost:4000tutorials/machine-learning/keras/2-1-regressor/
    78 Q-learning 思维决策 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-3-tabular-q2/
    79 Subplot 分格显示 http://localhost:4000tutorials/data-manipulation/plt/4-2-subplot2/
    80 Pandas plot 出图 http://localhost:4000tutorials/data-manipulation/np-pd/3-8-pd-plot/
    81 批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/ML-intro/3-08-batch-normalization/
    82 Policy Gradients http://localhost:4000tutorials/machine-learning/ML-intro/4-07-PG/
    83 什么是多线程 Threading http://localhost:4000tutorials/python-basic/threading/1-why/
    84 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/ML-intro/2-8-gradient-descent/
    85 为什么 Torch 是动态的 http://localhost:4000tutorials/machine-learning/torch/5-01-dynamic/
    86 保存提取 http://localhost:4000tutorials/machine-learning/torch/3-04-save-reload/
    87 添加线程 Thread http://localhost:4000tutorials/python-basic/threading/2-add-thread/
    88 DQN 神经网络 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-2-DQN2/
    89 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/torch/4-04-A-autoencoder/
    90 Autoencoder 自编码 http://localhost:4000tutorials/machine-learning/keras/2-6-autoencoder/
    91 元组 列表 http://localhost:4000tutorials/python-basic/basic/11-1-array-list/
    92 Sarsa-lambda http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-3-tabular-sarsa-lambda/
    93 设置坐标轴2 http://localhost:4000tutorials/data-manipulation/plt/2-4-axis2/
    94 函数参数 http://localhost:4000tutorials/python-basic/basic/05-2-def-parameters/
    95 神经网络在做什么 http://localhost:4000tutorials/machine-learning/theano/1-3-NN-job/
    96 GIL 不一定有效率 http://localhost:4000tutorials/python-basic/threading/5-GIL/
    97 Pandas 设置值 http://localhost:4000tutorials/data-manipulation/np-pd/3-3-pd-assign/
    98 Pandas 选择数据 http://localhost:4000tutorials/data-manipulation/np-pd/3-2-pd-indexing/
    99 CNN 卷积神经网络 http://localhost:4000tutorials/machine-learning/torch/4-01-CNN/
    100 Placeholder 传入值 http://localhost:4000tutorials/machine-learning/tensorflow/2-5-placeholde/
    101 Tensorboard 可视化好帮手 1 http://localhost:4000tutorials/machine-learning/tensorflow/4-1-tensorboard1/
    102 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/theano/1-1-A-ANN-and-NN/
    103 回到从前 (checkout 针对单个文件) http://localhost:4000tutorials/others/git/3-2-checkout/
    104 为什么用强化学习 Why? http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-why/
    105 Linux 基本指令 touch, cp 和 mv http://localhost:4000tutorials/others/linux-basic/2-02-basic-command/
    106 OpenAI gym 环境库 http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-4-gym/
    107 NEAT 强化学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-03-neat-reinforcement-learning/
    108 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/5-03-A-CNN/
    109 Tensorflow 2017 更新 http://localhost:4000tutorials/machine-learning/tensorflow/5-14-tf2017/
    110 continue & break http://localhost:4000tutorials/python-basic/basic/13-01-continue-break/
    111 multiprocessing 什么是多进程 http://localhost:4000tutorials/python-basic/basic/13-06-multiprocessing/
    112 Saver 保存读取 http://localhost:4000tutorials/machine-learning/tensorflow/5-06-save/
    113 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-A-ANN-and-NN/
    114 什么是 Sarsa http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-1-A-sarsa/
    115 神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-1-NN/
    116 通用学习模式 http://localhost:4000tutorials/machine-learning/sklearn/2-2-general-pattern/
    117 第一个版本库 Repository http://localhost:4000tutorials/others/git/2-1-repository/
    118 Dropout 缓解过拟合 http://localhost:4000tutorials/machine-learning/torch/5-03-dropout/
    119 Sarsa 算法更新 http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-1-tabular-sarsa1/
    120 set 找不同 http://localhost:4000tutorials/python-basic/basic/13-09-set/
    121 多维列表 http://localhost:4000tutorials/python-basic/basic/11-3-multi-dim-list/
    122 检验神经网络 (Evaluation) http://localhost:4000tutorials/machine-learning/sklearn/3-2-A-Evaluate-NN/
    123 3D 数据 http://localhost:4000tutorials/data-manipulation/plt/3-5-3d/
    124 Regression 回归例子 http://localhost:4000tutorials/machine-learning/theano/3-2-regression/
    125 激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/ML-intro/3-04-activation-function/
    126 Scatter 散点图 http://localhost:4000tutorials/data-manipulation/plt/3-1-scatter/
    127 什么是神经网络进化 (Neuro-Evolution) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-00-neuro-evolution/
    128 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/5-07-A-RNN/
    129 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/tensorflow/1-1-B-NN/
    130 DQN 算法更新 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-1-DQN1/
    131 怎么样从 MacOS 或 Linux 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-01-ssh-from-linux-or-mac/
    132 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/keras/1-1-B-NN/
    133 区分类型 (分类) http://localhost:4000tutorials/machine-learning/torch/3-02-classification/
    134 Optimizer 优化器 http://localhost:4000tutorials/machine-learning/torch/3-06-optimizer/
    135 AlphaGo Zero 为什么更厉害? http://localhost:4000tutorials/machine-learning/ML-intro/4-11-AlphaGo-zero/
    136 Deep Deterministic Policy Gradient (DDPG) http://localhost:4000tutorials/machine-learning/ML-intro/4-09-DDPG/
    137 if 判断 http://localhost:4000tutorials/python-basic/basic/04-1-if/
    138 class 类 init 功能 http://localhost:4000tutorials/python-basic/basic/09-2-class-init/
    139 Numpy copy & deep copy http://localhost:4000tutorials/data-manipulation/np-pd/2-8-np-copy/
    140 Tensorboard 可视化好帮手 2 http://localhost:4000tutorials/machine-learning/tensorflow/4-2-tensorboard2/
    141 Frame 框架 http://localhost:4000tutorials/python-basic/tkinter/2-09-frame/
    142 Microbial Genetic Algorithm http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-04-microbial-genetic-algorithm/
    143 NEAT 监督学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-02-neat-supervised-learning/
    144 安装 http://localhost:4000tutorials/python-basic/basic/01-1-install/
    145 怎么样从 Windows 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-02-ssh-from-windows/
    146 什么是 Actor Critic http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-1-A-AC/
    147 遗传算法 (Genetic Algorithm) http://localhost:4000tutorials/machine-learning/ML-intro/5-01-genetic-algorithm/
    148 CNN 卷积神经网络 http://localhost:4000tutorials/machine-learning/keras/2-3-CNN/
    149 选择好特征 (Good Features) http://localhost:4000tutorials/machine-learning/ML-intro/3-03-choose-feature/
    150 什么是 Q Leaning http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-2-A-q-learning/
    151 Evolution Strategy 强化学习 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/4-04-evolution-strategy-reinforcement-learning/
    152 兼容 backend http://localhost:4000tutorials/machine-learning/keras/1-3-backend/
    153 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/theano/3-5-A-overfitting/
    154 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/theano/1-1-C-gradient-descent/
    155 Numpy 和 Pandas 安装 http://localhost:4000tutorials/data-manipulation/np-pd/1-2-install/
    156 例子 旅行商人问题 (Travel Sales Problem) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-03-genetic-algorithm-travel-sales-problem/
    157 Distributed Proximal Policy Optimization (DPPO) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-4-DPPO/
    158 Pytorch 安装 http://localhost:4000tutorials/machine-learning/torch/1-2-install/
    159 基础数学运算 http://localhost:4000tutorials/python-basic/basic/02-2-basic-math/
    160 激励函数 (Activation) http://localhost:4000tutorials/machine-learning/torch/2-03-activation/
    161 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-D-feature-representation/
    162 例子3 结果可视化 http://localhost:4000tutorials/machine-learning/tensorflow/3-3-visualize-result/
    163 Activation function 激励函数 http://localhost:4000tutorials/machine-learning/theano/2-4-activation/
    164 可视化结果 回归例子 http://localhost:4000tutorials/machine-learning/theano/3-3-visualize/
    165 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/torch/4-02-A-RNN/
    166 什么是 Deep Deterministic Policy Gradient (DDPG) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-2-A-DDPG/
    167 例子 登录窗口1 http://localhost:4000tutorials/python-basic/tkinter/3-01-example1/
    168 怎么样用 TeamViewer 和 VNC 从远程控制电脑 http://localhost:4000tutorials/others/linux-basic/4-04-teamviewer-vnc/
    169 什么是循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/keras/2-4-A-RNN/
    170 Pandas 导入导出 http://localhost:4000tutorials/data-manipulation/np-pd/3-5-pd-to/
    171 选择学习方法 http://localhost:4000tutorials/machine-learning/sklearn/2-1-select-method/
    172 class 类 http://localhost:4000tutorials/python-basic/basic/09-1-class/
    173 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/theano/2-4-A-activation-function/
    174 特征标准化 (Feature Normalization) http://localhost:4000tutorials/machine-learning/ML-intro/3-02-normalization/
    175 Policy Gradients 思维决策 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-2-policy-gradient-softmax2/
    176 RNN LSTM (回归例子可视化) http://localhost:4000tutorials/machine-learning/tensorflow/5-10-RNN4/
    177 关系拟合 (回归) http://localhost:4000tutorials/machine-learning/torch/3-01-regression/
    178 正规化 Normalization http://localhost:4000tutorials/machine-learning/sklearn/3-1-normalization/
    179 GPU 加速运算 http://localhost:4000tutorials/machine-learning/torch/5-02-GPU/
    180 DQN 强化学习 http://localhost:4000tutorials/machine-learning/torch/4-05-DQN/
    181 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/ML-intro/2-7-feature-representation/
    182 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/ML-intro/3-06-speed-up-learning/
    183 交叉验证 1 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-2-cross-validation1/
    184 读写文件 1 http://localhost:4000tutorials/python-basic/basic/08-1-read-file/
    185 回到从前 (reset) http://localhost:4000tutorials/others/git/3-1-reset/
    186 什么是 Tkinter http://localhost:4000tutorials/python-basic/tkinter/1-1-why/
    187 Theano 安装 http://localhost:4000tutorials/machine-learning/theano/1-2-install/
    188 Save 保存 提取 http://localhost:4000tutorials/machine-learning/theano/3-6-save/
    189 sklearn 常用属性与功能 http://localhost:4000tutorials/machine-learning/sklearn/2-4-model-attributes/
    190 变量 (Variable) http://localhost:4000tutorials/machine-learning/torch/2-02-variable/
    191 threading 什么是多线程 http://localhost:4000tutorials/python-basic/basic/13-05-threading/
    192 RNN LSTM 循环神经网络 (分类例子) http://localhost:4000tutorials/machine-learning/tensorflow/5-08-RNN2/
    193 记录修改 (log & diff) http://localhost:4000tutorials/others/git/2-2-modified/
    194 dictionary 字典 http://localhost:4000tutorials/python-basic/basic/11-4-dictionary/
    195 Session 会话控制 http://localhost:4000tutorials/machine-learning/tensorflow/2-3-session/
    196 神经网络进化 (Neuro-Evolution) http://localhost:4000tutorials/machine-learning/ML-intro/5-03-neuro-evolution/
    197 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/tensorflow/1-1-C-gradient-descent/
    198 例子3 添加层 def add_layer() http://localhost:4000tutorials/machine-learning/tensorflow/3-1-add-layer/
    199 Scale 尺度 http://localhost:4000tutorials/python-basic/tkinter/2-05-scale/
    200 例子 配对句子 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-02-genetic-algorithm-match-phrase/
    201 rebase 分支冲突 http://localhost:4000tutorials/others/git/4-3-rebase/
    202 Batch Normalization 批标准化 http://localhost:4000tutorials/machine-learning/torch/5-04-batch-normalization/
    203 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/theano/1-1-D-feature-representation/
    204 自己的云计算, 把 Linux 当成你的云计算平台 http://localhost:4000tutorials/others/linux-basic/5-01-remote-learning/
    205 例子 登录窗口2 http://localhost:4000tutorials/python-basic/tkinter/3-02-example2/
    206 机器学习 (Machine Learning) http://localhost:4000tutorials/machine-learning/sklearn/1-1-A-ML/
    207 自己的模块 http://localhost:4000tutorials/python-basic/basic/12-2-personal-module/
    208 Matplotlib 安装 http://localhost:4000tutorials/data-manipulation/plt/1-2-install/
    209 进化策略 (Evolution Strategy) http://localhost:4000tutorials/machine-learning/ML-intro/5-02-evolution-strategy/
    210 list 列表 http://localhost:4000tutorials/python-basic/basic/11-2-list/
    211 Double DQN (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-5-double_DQN/
    212 Numpy 的创建 array http://localhost:4000tutorials/data-manipulation/np-pd/2-2-np-array/
    213 遗传算法 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-01-genetic-algorithm/
    214 Torch 或 Numpy http://localhost:4000tutorials/machine-learning/torch/2-01-torch-numpy/
    215 快速搭建法 http://localhost:4000tutorials/machine-learning/torch/3-03-fast-nn/
    216 例子 登录窗口3 http://localhost:4000tutorials/python-basic/tkinter/3-03-example3/
    217 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/ML-intro/2-0-ANN-and-NN/
    218 zip lambda map http://localhost:4000tutorials/python-basic/basic/13-03-zip-lambda-map/
    219 Batch Normalization 批标准化 http://localhost:4000tutorials/machine-learning/tensorflow/5-13-BN/
    220 pack grid place 放置位置 http://localhost:4000tutorials/python-basic/tkinter/2-11-pack-grid-place/
    221 scope 命名方法 http://localhost:4000tutorials/machine-learning/tensorflow/5-12-scope/
    222 Subplot 多合一显示 http://localhost:4000tutorials/data-manipulation/plt/4-1-subpot1/
    223 L1 / L2 正规化 (Regularization) http://localhost:4000tutorials/machine-learning/ML-intro/3-09-l1l2regularization/
    224 强化学习方法汇总 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/ML-intro/4-02-RL-methods/
    225 次坐标轴 http://localhost:4000tutorials/data-manipulation/plt/4-4-sencondary-axis/
    226 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-4-B-LSTM/
    227 Asynchronous Advantage Actor-Critic (A3C) http://localhost:4000tutorials/machine-learning/ML-intro/4-10-A3C/
    228 强化学习 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/ML-intro/4-01-RL/
    229 Numpy array 分割 http://localhost:4000tutorials/data-manipulation/np-pd/2-7-np-split/
    230 Numpy array 合并 http://localhost:4000tutorials/data-manipulation/np-pd/2-6-np-concat/
    231 if else 判断 http://localhost:4000tutorials/python-basic/basic/04-2-if-else/
    232 进程锁 Lock http://localhost:4000tutorials/python-basic/multiprocessing/7-lock/
    233 import 模块 http://localhost:4000tutorials/python-basic/basic/12-1-import/
    234 RNN Regressor 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-5-RNN-LSTM-Regressor/
    235 sklearn 强大数据库 http://localhost:4000tutorials/machine-learning/sklearn/2-3-database/
    236 Regularization 正规化 http://localhost:4000tutorials/machine-learning/theano/3-5-regularization/
    237 效率对比 threading & multiprocessing http://localhost:4000tutorials/python-basic/multiprocessing/4-comparison/
    238 Why Numpy & Pandas? http://localhost:4000tutorials/data-manipulation/np-pd/1-1-why/
    239 共享内存 shared memory http://localhost:4000tutorials/python-basic/multiprocessing/6-shared-memory/
    240 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/torch/2-03-A-activation-function/
    241 Menubar 菜单 http://localhost:4000tutorials/python-basic/tkinter/2-08-menubar/
    242 Annotation 标注 http://localhost:4000tutorials/data-manipulation/plt/2-6-annotation/
    243 RNN 循环神经网络 (分类) http://localhost:4000tutorials/machine-learning/torch/4-02-RNN-classification/
    244 什么是进化策略 (Evolution Strategy) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-00-evolution-strategy/
    245 例子3 建造神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/3-2-create-NN/
    246 (1+1)-ES http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-02-evolution-strategy-1+1-ES/
    247 保存模型 http://localhost:4000tutorials/machine-learning/sklearn/3-5-save/
    248 进化算法 简介 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/1-01-intro/
    249 Sarsa 思维决策 http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-2-tabular-sarsa2/
    250 Dropout 解决 overfitting http://localhost:4000tutorials/machine-learning/tensorflow/5-02-dropout/
    251 什么是激励函数 (Activation Function) http://localhost:4000tutorials/machine-learning/tensorflow/2-6-A-activation-function/
    252 进程池 Pool http://localhost:4000tutorials/python-basic/multiprocessing/5-pool/
    253 Asyncio http://localhost:4000tutorials/data-manipulation/scraping/asyncio/
    254 添加进程 Process http://localhost:4000tutorials/python-basic/multiprocessing/2-add/
    255 存储进程输出 Queue http://localhost:4000tutorials/python-basic/multiprocessing/3-queue/
    256 过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/ML-intro/3-05-overfitting/
    257 图中图 http://localhost:4000tutorials/data-manipulation/plt/4-3-plot-in-plot/
    258 Save & reload 保存提取 http://localhost:4000tutorials/machine-learning/keras/3-1-save/
    259 Checkbutton 勾选项 http://localhost:4000tutorials/python-basic/tkinter/2-06-checkbutton/
    260 分支 (branch) http://localhost:4000tutorials/others/git/4-1-branch/
    261 Q-learning 算法更新 http://localhost:4000tutorials/machine-learning/reinforcement-learning/2-2-tabular-q1/
    262 变量 variable http://localhost:4000tutorials/python-basic/basic/02-3-variable/
    263 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/torch/1-1-C-gradient-descent/
    264 生成对抗网络 (GAN) http://localhost:4000tutorials/machine-learning/ML-intro/2-6-GAN/
    265 什么是 Sarsa(lambda) http://localhost:4000tutorials/machine-learning/reinforcement-learning/3-3-A-sarsa-lambda/
    266 Pandas 合并 merge http://localhost:4000tutorials/data-manipulation/np-pd/3-7-pd-merge/
    267 遗传算法 (Genetic Algorithm) http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/2-00-genetic-algorithm/
    268 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/keras/1-1-D-feature-representation/
    269 什么是批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/torch/5-04-A-batch-normalization/
    270 自己的云计算, 多电脑共享你云端文件 http://localhost:4000tutorials/others/linux-basic/5-02-share-folder/
    271 从头开始做一个机器手臂3 写动态环境 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch3/
    272 定义 Layer 类 http://localhost:4000tutorials/machine-learning/theano/3-1-layer/
    273 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/torch/4-02-B-LSTM/
    274 pickle 保存数据 http://localhost:4000tutorials/python-basic/basic/13-08-pickle/
    275 Classifier 分类 http://localhost:4000tutorials/machine-learning/keras/2-2-classifier/
    276 CNN 卷积神经网络 1 http://localhost:4000tutorials/machine-learning/tensorflow/5-03-CNN1/
    277 科普: 神经网络的黑盒不黑 http://localhost:4000tutorials/machine-learning/torch/1-1-D-feature-representation/
    278 什么是生成对抗网络 (GAN) http://localhost:4000tutorials/machine-learning/torch/4-06-A-GAN/
    279 强化学习方法汇总 (Reinforcement Learning) http://localhost:4000tutorials/machine-learning/reinforcement-learning/1-1-B-RL-methods/
    280 Keras 安装 http://localhost:4000tutorials/machine-learning/keras/1-2-install/
    281 Entry & Text 输入, 文本框 http://localhost:4000tutorials/python-basic/tkinter/2-02-entry-text/
    282 RNN 循环神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/5-07-RNN1/
    283 Policy Gradients 算法更新 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/5-1-policy-gradient-softmax1/
    284 Function 用法 http://localhost:4000tutorials/machine-learning/theano/2-2-function/
    285 优化器 optimizer http://localhost:4000tutorials/machine-learning/tensorflow/3-4-optimizer/
    286 Pandas 合并 concat http://localhost:4000tutorials/data-manipulation/np-pd/3-6-pd-concat/
    287 Tensorflow 安装 http://localhost:4000tutorials/machine-learning/tensorflow/1-2-install/
    288 从头开始做一个机器手臂4 加入强化学习算法 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch4/
    289 Deep Deterministic Policy Gradient (DDPG) (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/6-2-DDPG/
    290 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/keras/2-3-A-CNN/
    291 什么是批标准化 (Batch Normalization) http://localhost:4000tutorials/machine-learning/tensorflow/5-13-A-batch-normalization/
    292 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/tensorflow/5-02-A-overfitting/
    293 函数默认参数 http://localhost:4000tutorials/python-basic/basic/05-3-def-default-parameters/
    294 Linux 文件权限 http://localhost:4000tutorials/others/linux-basic/3-01-file-permissions/
    295 Animation 动画 http://localhost:4000tutorials/data-manipulation/plt/5-1-animation/
    296 全局 & 局部 变量 http://localhost:4000tutorials/python-basic/basic/06-1-global-local/
    297 从头开始做一个机器手臂2 写静态环境 http://localhost:4000tutorials/machine-learning/ML-practice/RL-build-arm-from-scratch2/
    298 Natural Evolution Strategy http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-03-evolution-strategy-natural-evolution-strategy/
    299 Pandas 处理丢失数据 http://localhost:4000tutorials/data-manipulation/np-pd/3-4-pd-nan/
    300 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/theano/1-1-B-NN/
    301 Numpy 索引 http://localhost:4000tutorials/data-manipulation/np-pd/2-5-np-indexing/
    302 Radiobutton 选择按钮 http://localhost:4000tutorials/python-basic/tkinter/2-04-radiobutton/
    303 激励函数 Activation Function http://localhost:4000tutorials/machine-learning/tensorflow/2-6-activation/
    304 Why Theano? http://localhost:4000tutorials/machine-learning/theano/1-1-why/
    305 Classification 分类学习 http://localhost:4000tutorials/machine-learning/theano/3-4-classification/
    306 了解网页结构 http://localhost:4000tutorials/data-manipulation/scraping/1-01-understand-website/
    307 Variable 变量 http://localhost:4000tutorials/machine-learning/tensorflow/2-4-variable/
    308 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/tensorflow/3-4-A-speed-up-learning/
    309 Linux 基本指令 nano 和 cat http://localhost:4000tutorials/others/linux-basic/2-04-basic-command/
    310 处理结构 http://localhost:4000tutorials/machine-learning/tensorflow/2-1-structure/
    311 循环神经网络 RNN (Recurrent Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-3-RNN/
    312 Bar 柱状图 http://localhost:4000tutorials/data-manipulation/plt/3-2-Bar/
    313 Shared 变量 http://localhost:4000tutorials/machine-learning/theano/2-3-shared-variable/
    314 总结和更多 http://localhost:4000tutorials/machine-learning/theano/4-1-summary/
    315 print 功能 http://localhost:4000tutorials/python-basic/basic/02-1-print/
    316 merge 分支冲突 http://localhost:4000tutorials/others/git/4-2-merge-conflict/
    317 join 功能 http://localhost:4000tutorials/python-basic/threading/3-join/
    318 Why Git? http://localhost:4000tutorials/others/git/1-1-why/
    319 RNN Classifier 循环神经网络 http://localhost:4000tutorials/machine-learning/keras/2-4-RNN-classifier/
    320 def 函数 http://localhost:4000tutorials/python-basic/basic/05-1-def/
    321 安装 Ubuntu 17.10 http://localhost:4000tutorials/others/linux-basic/1-2-install/
    322 Linux 基本指令 ls 和 cd http://localhost:4000tutorials/others/linux-basic/2-01-basic-command/
    323 Sklearn 安装 http://localhost:4000tutorials/machine-learning/sklearn/1-2-install/
    324 AutoEncoder (自编码/非监督学习) http://localhost:4000tutorials/machine-learning/torch/4-04-autoencoder/
    325 DQN http://localhost:4000tutorials/machine-learning/ML-intro/4-06-DQN/
    326 为什么用 Numpy 还是慢, 你用对了吗? http://localhost:4000tutorials/data-manipulation/np-pd/4-1-speed-up-numpy/
    327 什么是过拟合 (Overfitting) http://localhost:4000tutorials/machine-learning/torch/5-03-A-overfitting/
    328 机器学习 (Machine Learning) http://localhost:4000tutorials/machine-learning/ML-intro/1-1-machine-learning/
    329 Sarsa(lambda) http://localhost:4000tutorials/machine-learning/ML-intro/4-05-sarsa-lambda/
    330 卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/ML-intro/2-2-CNN/
    331 交叉验证 3 Cross-validation http://localhost:4000tutorials/machine-learning/sklearn/3-4-cross-validation3/
    332 例子2 http://localhost:4000tutorials/machine-learning/tensorflow/2-2-example2/
    333 什么是 DQN http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-1-A-DQN/
    334 为什么选 Tensorflow? http://localhost:4000tutorials/machine-learning/tensorflow/1-1-why/
    335 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/keras/1-1-A-ANN-and-NN/
    336 设置坐标轴1 http://localhost:4000tutorials/data-manipulation/plt/2-3-axis1/
    337 Why Sklearn? http://localhost:4000tutorials/machine-learning/sklearn/1-1-why/
    338 Q Leaning http://localhost:4000tutorials/machine-learning/ML-intro/4-03-q-learning/
    339 进化策略 http://localhost:4000tutorials/machine-learning/evolutionary-algorithm/3-01-evolution-strategy/
    340 神经网络 梯度下降 http://localhost:4000tutorials/machine-learning/keras/1-1-C-gradient-descent/
    341 什么是 Multiprocessing http://localhost:4000tutorials/python-basic/multiprocessing/1-why/
    342 Listbox 列表部件 http://localhost:4000tutorials/python-basic/tkinter/2-03-listbox/
    343 Numpy 属性 http://localhost:4000tutorials/data-manipulation/np-pd/2-1-np-attributes/
    344 科普: 人工神经网络 VS 生物神经网络 http://localhost:4000tutorials/machine-learning/torch/1-1-A-ANN-and-NN/
    345 RNN LSTM (回归例子) http://localhost:4000tutorials/machine-learning/tensorflow/5-09-RNN3/
    346 CNN 卷积神经网络 2 http://localhost:4000tutorials/machine-learning/tensorflow/5-04-CNN2/
    347 figure 图像 http://localhost:4000tutorials/data-manipulation/plt/2-2-figure/
    348 用 Tensorflow 可视化梯度下降 http://localhost:4000tutorials/machine-learning/tensorflow/5-15-tf-gradient-descent/
    349 储存进程结果 Queue http://localhost:4000tutorials/python-basic/threading/4-queue/
    350 Git 安装 http://localhost:4000tutorials/others/git/1-2-install/
    351 tick 能见度 http://localhost:4000tutorials/data-manipulation/plt/2-7-tick-visibility/
    352 给你的 Ubuntu 安装软件 http://localhost:4000tutorials/others/linux-basic/1-4-install-software/
    353 基本用法 http://localhost:4000tutorials/machine-learning/theano/2-1-basic-usage/
    354 加速神经网络训练 (Speed Up Training) http://localhost:4000tutorials/machine-learning/torch/3-06-A-speed-up-learning/
    355 Contours 等高线图 http://localhost:4000tutorials/data-manipulation/plt/3-3-contours/
    356 处理不均衡数据 (Imbalanced data) http://localhost:4000tutorials/machine-learning/ML-intro/3-07-imbalanced-data/
    357 批训练 http://localhost:4000tutorials/machine-learning/torch/3-05-train-on-batch/
    358 DQN 思维决策 (Tensorflow) http://localhost:4000tutorials/machine-learning/reinforcement-learning/4-3-DQN3/
    359 快速了解 Ubuntu 17.10 基本界面 http://localhost:4000tutorials/others/linux-basic/1-3-system-overview/
    360 Why Pytorch? http://localhost:4000tutorials/machine-learning/torch/1-1-why/
    361 什么是卷积神经网络 CNN (Convolutional Neural Network) http://localhost:4000tutorials/machine-learning/torch/4-01-A-CNN/
    362 Label & Button 标签和按钮 http://localhost:4000tutorials/python-basic/tkinter/2-01-label-button/
    363 读写文件 2 http://localhost:4000tutorials/python-basic/basic/08-2-read-file2/
    364 什么是神经网络 (Neural Network) http://localhost:4000tutorials/machine-learning/torch/1-1-B-NN/
    365 什么是自编码 (Autoencoder) http://localhost:4000tutorials/machine-learning/tensorflow/5-11-A-autoencoder/
    366 Why Linux? http://localhost:4000tutorials/others/linux-basic/1-1-why/
    367 怎么样从手机 (Android安卓/IOS苹果) 通过 SSH 远程 Linux http://localhost:4000tutorials/others/linux-basic/4-03-ssh-from-phone/
    368 copy & deepcopy 浅复制 & 深复制 http://localhost:4000tutorials/python-basic/basic/13-04-copy/
    369 检验神经网络 (Evaluation) http://localhost:4000tutorials/machine-learning/ML-intro/3-01-Evaluate-NN/
    370 input 输入 http://localhost:4000tutorials/python-basic/basic/10-1-input/
    371 什么是 LSTM 循环神经网络 http://localhost:4000tutorials/machine-learning/tensorflow/5-07-B-LSTM/
    372 try 错误处理 http://localhost:4000tutorials/python-basic/basic/13-02-try/
    Total time: 16.3 s

# Asyncio tutorial

## A normal way in python
**Firstly, let's see a running time in a normal way.**


```python
import time


def job(t):
    print('Start job ', t)
    time.sleep(t)               # wait for "t" seconds
    print('Job ', t, ' takes ', t, ' s')
    

def main():
    [job(t) for t in range(1, 3)]
    
    
t1 = time.time()
main()
print("NO async total time : ", time.time() - t1)
```

    Start job  1
    Job  1  takes  1  s
    Start job  2
    Job  2  takes  2  s
    NO async total time :  3.0082271099090576


## Translate above to async
**Now, let's see the running time using asyncio**


```python
import asyncio


async def job(t):
    print('Start job ', t)
    await asyncio.sleep(t)          # wait for "t" seconds, it will look for another job while await
    print('Job ', t, ' takes ', t, ' s')
    

async def main(loop):
    tasks = [loop.create_task(job(t)) for t in range(1, 3)]     # just create, not run job
    await asyncio.wait(tasks)                                   # run jobs and wait for all tasks done

t1 = time.time()
loop = asyncio.get_event_loop()
loop.run_until_complete(main(loop))
# loop.close()                          # Ipython notebook gives error if close loop
print("Async total time : ", time.time() - t1)

```

    Start job  1
    Start job  2
    Job  1  takes  1  s
    Job  2  takes  2  s
    Async total time :  2.0054221153259277


## A normal way in crawling webpage
**We can use this machanism in requesting for a website. Await for download a page and switch to do another job.**


```python
import requests

URL = 'https://morvanzhou.github.io/'


def normal():  
    for i in range(2):
        r = requests.get(URL)
        url = r.url
        print(url)
    
t1 = time.time()
normal()
print("Normal total time:", time.time()-t1)
```

    https://morvanzhou.github.io/
    https://morvanzhou.github.io/
    Normal total time: 0.3869960308074951


## Translate above to async using aiohttp
**We have to install another useful package called [aiohttp](https://aiohttp.readthedocs.io/en/stable/index.html). You can simply run "pip3 install aiohttp" in your terminal.**


```python
import aiohttp


async def job(session):
    response = await session.get(URL)
    return str(response.url)


async def main(loop):
    async with aiohttp.ClientSession() as session:
        tasks = [loop.create_task(job(session)) for _ in range(2)]
        finished, unfinished = await asyncio.wait(tasks)
        all_results = [r.result() for r in finished]        # get return from job
        print(all_results)
    
t1 = time.time()
loop = asyncio.get_event_loop()
loop.run_until_complete(main(loop))
# loop.close()                      # Ipython notebook gives error if close loop
print("Async total time:", time.time() - t1)
```

    ['https://morvanzhou.github.io/', 'https://morvanzhou.github.io/']
    Async total time: 0.11447715759277344


## Compare async with multiprocessing
**The following code scrape my website with async**


```python
import aiohttp
import asyncio
import time
from bs4 import BeautifulSoup
from urllib.request import urljoin
import re
import multiprocessing as mp

# base_url = "https://morvanzhou.github.io/"
base_url = "http://127.0.0.1:4000/"

# DON'T OVER CRAWL THE WEBSITE OR YOU MAY NEVER VISIT AGAIN
if base_url != "http://127.0.0.1:4000/":
    restricted_crawl = True
else:
    restricted_crawl = False
        
        
seen = set()
unseen = set([base_url])


def parse(html):
    soup = BeautifulSoup(html, 'lxml')
    urls = soup.find_all('a', {"href": re.compile('^/.+?/$')})
    title = soup.find('h1').get_text().strip()
    page_urls = set([urljoin(base_url, url['href']) for url in urls])
    url = soup.find('meta', {'property': "og:url"})['content']
    return title, page_urls, url


async def crawl(url, session):
    r = await session.get(url)
    html = await r.text()
    await asyncio.sleep(0.1)        # slightly delay for downloading
    return html


async def main(loop):
    pool = mp.Pool(8)               # slightly affected
    async with aiohttp.ClientSession() as session:
        count = 1
        while len(unseen) != 0:
            print('\nAsync Crawling...')
            tasks = [loop.create_task(crawl(url, session)) for url in unseen]
            finished, unfinished = await asyncio.wait(tasks)
            htmls = [f.result() for f in finished]
            
            print('\nDistributed Parsing...')
            parse_jobs = [pool.apply_async(parse, args=(html,)) for html in htmls]
            results = [j.get() for j in parse_jobs]
            
            print('\nAnalysing...')
            seen.update(unseen)
            unseen.clear()
            for title, page_urls, url in results:
                # print(count, title, url)
                unseen.update(page_urls - seen)
                count += 1

if __name__ == "__main__":
    t1 = time.time()
    loop = asyncio.get_event_loop()
    loop.run_until_complete(main(loop))
    # loop.close()
    print("Async total time: ", time.time() - t1)
```

    
    Async Crawling...
    
    Distributed Parsing...
    
    Analysing...
    
    Async Crawling...
    
    Distributed Parsing...
    
    Analysing...
    
    Async Crawling...
    
    Distributed Parsing...
    
    Analysing...
    Async total time:  7.21798300743103


**Here we try multiprocessing and test the speed**


```python
from urllib.request import urlopen, urljoin
from bs4 import BeautifulSoup
import multiprocessing as mp
import re
import time


def crawl(url):
    response = urlopen(url)
    time.sleep(0.1)             # slightly delay for downloading
    return response.read().decode()


def parse(html):
    soup = BeautifulSoup(html, 'lxml')
    urls = soup.find_all('a', {"href": re.compile('^/.+?/$')})
    title = soup.find('h1').get_text().strip()
    page_urls = set([urljoin(base_url, url['href']) for url in urls])
    url = soup.find('meta', {'property': "og:url"})['content']
    return title, page_urls, url


if __name__ == '__main__':
    # base_url = 'https://morvanzhou.github.io/'
    base_url = "http://127.0.0.1:4000/"
        
    # DON'T OVER CRAWL THE WEBSITE OR YOU MAY NEVER VISIT AGAIN
    if base_url != "http://127.0.0.1:4000/":
        restricted_crawl = True
    else:
        restricted_crawl = False
        
    unseen = set([base_url,])
    seen = set()

    pool = mp.Pool(8)                       # number strongly affected
    count, t1 = 1, time.time()
    while len(unseen) != 0:                 # still get some url to visit
        if restricted_crawl and len(seen) > 20:
            break
        print('\nDistributed Crawling...')
        crawl_jobs = [pool.apply_async(crawl, args=(url,)) for url in unseen]
        htmls = [j.get() for j in crawl_jobs]                                       # request connection
        htmls = [h for h in htmls if h is not None]     # remove None

        print('\nDistributed Parsing...')
        parse_jobs = [pool.apply_async(parse, args=(html,)) for html in htmls]
        results = [j.get() for j in parse_jobs]                                     # parse html

        print('\nAnalysing...')
        seen.update(unseen)
        unseen.clear()

        for title, page_urls, url in results:
            # print(count, title, url)
            count += 1
            unseen.update(page_urls - seen)

    print('Total time: %.1f s' % (time.time()-t1, ))


```

    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    
    Distributed Crawling...
    
    Distributed Parsing...
    
    Analysing...
    Total time: 11.5 s

# Selenium tutorial

**[Selenium](http://selenium-python.readthedocs.io) is a project to test website then be used to scraping because some website need to run javascript. If using what we learned before, we cannot get what we need when the actural content run by javascript.**

**Install [Selenium](http://selenium-python.readthedocs.io/installation.html) and it will open a actural browser to do all the jobs.**


```python
import os

os.makedirs('./img/', exist_ok=True)
```


```python
from selenium import webdriver

driver = webdriver.Chrome()
driver.get("https://morvanzhou.github.io/")
driver.find_element_by_xpath(u"//img[@alt='强化学习 (Reinforcement Learning)']").click()
driver.find_element_by_link_text("About").click()
driver.find_element_by_link_text(u"赞助").click()
driver.find_element_by_link_text(u"教程 ▾").click()
driver.find_element_by_link_text(u"数据处理 ▾").click()
driver.find_element_by_link_text(u"网页爬虫").click()

html = driver.page_source       # get html
driver.get_screenshot_as_file("./img/sreenshot1.png")
driver.close()
print(html[:200])
```

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="cmn-Hans en"><head>
      <meta charset="UTF-8" />
      <meta name="


![img](/img/sreenshot1.png)
**If don't want to the broswer to show up, you can define the option first.**


```python
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_argument("--headless")       # define headless

# add the option when creating driver
driver = webdriver.Chrome(chrome_options=chrome_options)    
driver.get("https://morvanzhou.github.io/")
driver.find_element_by_xpath(u"//img[@alt='强化学习 (Reinforcement Learning)']").click()
driver.find_element_by_link_text("About").click()
driver.find_element_by_link_text(u"赞助").click()
driver.find_element_by_link_text(u"教程 ▾").click()
driver.find_element_by_link_text(u"数据处理 ▾").click()
driver.find_element_by_link_text(u"网页爬虫").click()

html = driver.page_source           # get html
driver.get_screenshot_as_file("./img/sreenshot2.png")
driver.close()
print(html[:200])
```

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="cmn-Hans en"><head>
      <meta charset="UTF-8" />
      <meta name="


![img](/img/sreenshot2.png)


# Scrapy tutorial

**[Scrapy](https://scrapy.org/) is a very good web scrape project. If you have a large project, this one may help you a lot.**

**We demonstrate it by an example showed last time, to scrape [my website](https://morvanzhou.github.io/').This is a simple demo, if you want to dig into it, here is the [official tutorials](https://docs.scrapy.org/en/latest/intro/overview.html).**


```python
import scrapy


class MofanSpider(scrapy.Spider):
    name = "mofan"
    start_urls = [
        'https://morvanzhou.github.io/',
    ]
    # unseen = set()
    # seen = set()      # we don't need these two as scrapy will deal with them automatically

    def parse(self, response):
        yield {     # return some results
            'title': response.css('h1::text').extract_first(default='Missing').strip().replace('"', ""),
            'url': response.url,
        }

        urls = response.css('a::attr(href)').re(r'^/.+?/$')     # find all sub urls
        for url in urls:
            yield response.follow(url, callback=self.parse)     # it will filter duplication automatically


# lastly, run this in terminal
# scrapy runspider 5-2-scrapy.py -o res.json
```

**Run this code from terminal or cmd, you will see all the log for scraping.**


